<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>stmclient.cc source code [codebrowser/src/frontend/stmclient.cc] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'codebrowser/src/frontend/stmclient.cc'; var root_path = '../../..'; var data_path = '../../../../data';</script>
<script src='../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../..'>codebrowser</a>/<a href='..'>src</a>/<a href='./'>frontend</a>/<a href='stmclient.cc.html'>stmclient.cc</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i>    Mosh: the mobile shell</i></td></tr>
<tr><th id="3">3</th><td><i>    Copyright 2012 Keith Winstein</i></td></tr>
<tr><th id="4">4</th><td><i></i></td></tr>
<tr><th id="5">5</th><td><i>    This program is free software: you can redistribute it and/or modify</i></td></tr>
<tr><th id="6">6</th><td><i>    it under the terms of the GNU General Public License as published by</i></td></tr>
<tr><th id="7">7</th><td><i>    the Free Software Foundation, either version 3 of the License, or</i></td></tr>
<tr><th id="8">8</th><td><i>    (at your option) any later version.</i></td></tr>
<tr><th id="9">9</th><td><i></i></td></tr>
<tr><th id="10">10</th><td><i>    This program is distributed in the hope that it will be useful,</i></td></tr>
<tr><th id="11">11</th><td><i>    but WITHOUT ANY WARRANTY; without even the implied warranty of</i></td></tr>
<tr><th id="12">12</th><td><i>    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</i></td></tr>
<tr><th id="13">13</th><td><i>    GNU General Public License for more details.</i></td></tr>
<tr><th id="14">14</th><td><i></i></td></tr>
<tr><th id="15">15</th><td><i>    You should have received a copy of the GNU General Public License</i></td></tr>
<tr><th id="16">16</th><td><i>    along with this program.  If not, see &lt;<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.</i></td></tr>
<tr><th id="17">17</th><td><i></i></td></tr>
<tr><th id="18">18</th><td><i>    In addition, as a special exception, the copyright holders give</i></td></tr>
<tr><th id="19">19</th><td><i>    permission to link the code of portions of this program with the</i></td></tr>
<tr><th id="20">20</th><td><i>    OpenSSL library under certain conditions as described in each</i></td></tr>
<tr><th id="21">21</th><td><i>    individual source file, and distribute linked combinations including</i></td></tr>
<tr><th id="22">22</th><td><i>    the two.</i></td></tr>
<tr><th id="23">23</th><td><i></i></td></tr>
<tr><th id="24">24</th><td><i>    You must obey the GNU General Public License in all respects for all</i></td></tr>
<tr><th id="25">25</th><td><i>    of the code used other than OpenSSL. If you modify file(s) with this</i></td></tr>
<tr><th id="26">26</th><td><i>    exception, you may extend this exception to your version of the</i></td></tr>
<tr><th id="27">27</th><td><i>    file(s), but you are not obligated to do so. If you do not wish to do</i></td></tr>
<tr><th id="28">28</th><td><i>    so, delete this exception statement from your version. If you delete</i></td></tr>
<tr><th id="29">29</th><td><i>    this exception statement from all source files in the program, then</i></td></tr>
<tr><th id="30">30</th><td><i>    also delete it here.</i></td></tr>
<tr><th id="31">31</th><td><i>*/</i></td></tr>
<tr><th id="32">32</th><td></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="../../config.h.html">"config.h"</a></u></td></tr>
<tr><th id="34">34</th><td></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../../../include/err.h.html">&lt;err.h&gt;</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../../../include/errno.h.html">&lt;errno.h&gt;</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../../include/locale.h.html">&lt;locale.h&gt;</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="../../../include/string.h.html">&lt;string.h&gt;</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../../../include/unistd.h.html">&lt;unistd.h&gt;</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../../../include/stdio.h.html">&lt;stdio.h&gt;</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="../../../include/stdlib.h.html">&lt;stdlib.h&gt;</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="../../../include/x86_64-linux-gnu/sys/ioctl.h.html">&lt;sys/ioctl.h&gt;</a></u></td></tr>
<tr><th id="43">43</th><td><u>#include <a href="../../../include/x86_64-linux-gnu/sys/types.h.html">&lt;sys/types.h&gt;</a></u></td></tr>
<tr><th id="44">44</th><td><u>#include <a href="../../../include/pwd.h.html">&lt;pwd.h&gt;</a></u></td></tr>
<tr><th id="45">45</th><td><u>#include <a href="../../../include/signal.h.html">&lt;signal.h&gt;</a></u></td></tr>
<tr><th id="46">46</th><td><u>#include <a href="../../../include/time.h.html">&lt;time.h&gt;</a></u></td></tr>
<tr><th id="47">47</th><td></td></tr>
<tr><th id="48">48</th><td><u>#<span data-ppcond="48">if</span> <a class="macro" href="../../config.h.html#172" title="1" data-ref="_M/HAVE_PTY_H">HAVE_PTY_H</a></u></td></tr>
<tr><th id="49">49</th><td><u>#include <a href="../../../include/pty.h.html">&lt;pty.h&gt;</a></u></td></tr>
<tr><th id="50">50</th><td><u>#<span data-ppcond="48">elif</span> HAVE_UTIL_H</u></td></tr>
<tr><th id="51">51</th><td><u>#include &lt;util.h&gt;</u></td></tr>
<tr><th id="52">52</th><td><u>#<span data-ppcond="48">endif</span></u></td></tr>
<tr><th id="53">53</th><td></td></tr>
<tr><th id="54">54</th><td><u>#include <a href="stmclient.h.html">"stmclient.h"</a></u></td></tr>
<tr><th id="55">55</th><td><u>#include <a href="../util/swrite.h.html">"swrite.h"</a></u></td></tr>
<tr><th id="56">56</th><td><u>#include <a href="../statesync/completeterminal.h.html">"completeterminal.h"</a></u></td></tr>
<tr><th id="57">57</th><td><u>#include <a href="../statesync/user.h.html">"user.h"</a></u></td></tr>
<tr><th id="58">58</th><td><u>#include <a href="../util/fatal_assert.h.html">"fatal_assert.h"</a></u></td></tr>
<tr><th id="59">59</th><td><u>#include <a href="../util/locale_utils.h.html">"locale_utils.h"</a></u></td></tr>
<tr><th id="60">60</th><td><u>#include <a href="../util/pty_compat.h.html">"pty_compat.h"</a></u></td></tr>
<tr><th id="61">61</th><td><u>#include <a href="../util/select.h.html">"select.h"</a></u></td></tr>
<tr><th id="62">62</th><td><u>#include <a href="../util/timestamp.h.html">"timestamp.h"</a></u></td></tr>
<tr><th id="63">63</th><td></td></tr>
<tr><th id="64">64</th><td><u>#include <a href="../network/networktransport-impl.h.html">"networktransport-impl.h"</a></u></td></tr>
<tr><th id="65">65</th><td></td></tr>
<tr><th id="66">66</th><td><em>void</em> <a class="type" href="stmclient.h.html#STMClient" title='STMClient' data-ref="STMClient">STMClient</a>::<dfn class="decl def" id="_ZN9STMClient6resumeEv" title='STMClient::resume' data-ref="_ZN9STMClient6resumeEv">resume</dfn>( <em>void</em> )</td></tr>
<tr><th id="67">67</th><td>{</td></tr>
<tr><th id="68">68</th><td>  <i>/* Restore termios state */</i></td></tr>
<tr><th id="69">69</th><td>  <b>if</b> ( <a class="ref" href="../../../include/termios.h.html#tcsetattr" title='tcsetattr' data-ref="tcsetattr">tcsetattr</a>( <a class="macro" href="../../../include/unistd.h.html#213" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a>, <a class="macro" href="../../../include/x86_64-linux-gnu/bits/termios.h.html#213" title="0" data-ref="_M/TCSANOW">TCSANOW</a>, &amp;<a class="member" href="stmclient.h.html#STMClient::raw_termios" title='STMClient::raw_termios' data-ref="STMClient::raw_termios">raw_termios</a> ) &lt; <var>0</var> ) {</td></tr>
<tr><th id="70">70</th><td>      <a class="ref" href="../../../include/stdio.h.html#perror" title='perror' data-ref="perror">perror</a>( <q>"tcsetattr"</q> );</td></tr>
<tr><th id="71">71</th><td>      <a class="ref" href="../../../include/stdlib.h.html#exit" title='exit' data-ref="exit">exit</a>( <var>1</var> );</td></tr>
<tr><th id="72">72</th><td>  }</td></tr>
<tr><th id="73">73</th><td></td></tr>
<tr><th id="74">74</th><td>  <i>/* Put terminal in application-cursor-key mode */</i></td></tr>
<tr><th id="75">75</th><td>  <a class="ref" href="../util/swrite.h.html#_Z6swriteiPKcl" title='swrite' data-ref="_Z6swriteiPKcl">swrite</a>( <a class="macro" href="../../../include/unistd.h.html#214" title="1" data-ref="_M/STDOUT_FILENO">STDOUT_FILENO</a>, <a class="member" href="stmclient.h.html#STMClient::display" title='STMClient::display' data-ref="STMClient::display">display</a>.<a class="ref" href="../terminal/terminaldisplay.h.html#_ZNK8Terminal7Display4openB5cxx11Ev" title='Terminal::Display::open' data-ref="_ZNK8Terminal7Display4openB5cxx11Ev">open</a>().<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>() );</td></tr>
<tr><th id="76">76</th><td></td></tr>
<tr><th id="77">77</th><td>  <i>/* Flag that outer terminal state is unknown */</i></td></tr>
<tr><th id="78">78</th><td>  <a class="member" href="stmclient.h.html#STMClient::repaint_requested" title='STMClient::repaint_requested' data-ref="STMClient::repaint_requested">repaint_requested</a> = <b>true</b>;</td></tr>
<tr><th id="79">79</th><td>}</td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td><em>void</em> <a class="type" href="stmclient.h.html#STMClient" title='STMClient' data-ref="STMClient">STMClient</a>::<dfn class="decl def" id="_ZN9STMClient4initEv" title='STMClient::init' data-ref="_ZN9STMClient4initEv">init</dfn>( <em>void</em> )</td></tr>
<tr><th id="82">82</th><td>{</td></tr>
<tr><th id="83">83</th><td>  <b>if</b> ( !<a class="ref" href="../util/locale_utils.h.html#_Z14is_utf8_localev" title='is_utf8_locale' data-ref="_Z14is_utf8_localev">is_utf8_locale</a>() ) {</td></tr>
<tr><th id="84">84</th><td>    <a class="type" href="../util/locale_utils.h.html#LocaleVar" title='LocaleVar' data-ref="LocaleVar">LocaleVar</a> <dfn class="local col1 decl" id="1native_ctype" title='native_ctype' data-type='LocaleVar' data-ref="1native_ctype">native_ctype</dfn> = <a class="ref" href="../util/locale_utils.h.html#_Z9get_ctypev" title='get_ctype' data-ref="_Z9get_ctypev">get_ctype</a>();</td></tr>
<tr><th id="85">85</th><td>    <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a> <dfn class="local col2 decl" id="2native_charset" title='native_charset' data-type='string' data-ref="2native_charset">native_charset</dfn><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> <a class="ref" href="../util/locale_utils.h.html#_Z14locale_charsetv" title='locale_charset' data-ref="_Z14locale_charsetv">locale_charset</a>() );</td></tr>
<tr><th id="86">86</th><td></td></tr>
<tr><th id="87">87</th><td>    <a class="ref" href="../../../include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf">fprintf</a>( <a class="macro" href="../../../include/stdio.h.html#174" title="stderr" data-ref="_M/stderr">stderr</a>, <q>"mosh-client needs a UTF-8 native locale to run.\n\n"</q></td></tr>
<tr><th id="88">88</th><td>	     <q>"Unfortunately, the client's environment (%s) specifies\n"</q></td></tr>
<tr><th id="89">89</th><td>	     <q>"the character set \"%s\".\n\n"</q>,</td></tr>
<tr><th id="90">90</th><td>	     <a class="local col1 ref" href="#1native_ctype" title='native_ctype' data-ref="1native_ctype">native_ctype</a>.<a class="ref" href="../util/locale_utils.h.html#_ZNK9LocaleVar3strB5cxx11Ev" title='LocaleVar::str' data-ref="_ZNK9LocaleVar3strB5cxx11Ev">str</a>().<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>(), <a class="local col2 ref" href="#2native_charset" title='native_charset' data-ref="2native_charset">native_charset</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>() );</td></tr>
<tr><th id="91">91</th><td>    <em>int</em> <dfn class="local col3 decl" id="3unused" title='unused' data-type='int' data-ref="3unused">unused</dfn> <b>__attribute</b>((unused)) = <a class="ref" href="../../../include/stdlib.h.html#system" title='system' data-ref="system">system</a>( <q>"locale"</q> );</td></tr>
<tr><th id="92">92</th><td>    <a class="ref" href="../../../include/stdlib.h.html#exit" title='exit' data-ref="exit">exit</a>( <var>1</var> );</td></tr>
<tr><th id="93">93</th><td>  }</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td>  <i>/* Verify terminal configuration */</i></td></tr>
<tr><th id="96">96</th><td>  <b>if</b> ( <a class="ref" href="../../../include/termios.h.html#tcgetattr" title='tcgetattr' data-ref="tcgetattr">tcgetattr</a>( <a class="macro" href="../../../include/unistd.h.html#213" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a>, &amp;<a class="member" href="stmclient.h.html#STMClient::saved_termios" title='STMClient::saved_termios' data-ref="STMClient::saved_termios">saved_termios</a> ) &lt; <var>0</var> ) {</td></tr>
<tr><th id="97">97</th><td>    <a class="ref" href="../../../include/stdio.h.html#perror" title='perror' data-ref="perror">perror</a>( <q>"tcgetattr"</q> );</td></tr>
<tr><th id="98">98</th><td>    <a class="ref" href="../../../include/stdlib.h.html#exit" title='exit' data-ref="exit">exit</a>( <var>1</var> );</td></tr>
<tr><th id="99">99</th><td>  }</td></tr>
<tr><th id="100">100</th><td></td></tr>
<tr><th id="101">101</th><td>  <i>/* Put terminal driver in raw mode */</i></td></tr>
<tr><th id="102">102</th><td>  <a class="member" href="stmclient.h.html#STMClient::raw_termios" title='STMClient::raw_termios' data-ref="STMClient::raw_termios">raw_termios</a> <a class="ref" href="../../../include/x86_64-linux-gnu/bits/termios.h.html#28" title='termios::operator=' data-ref="_ZN7termiosaSERKS_">=</a> <a class="member" href="stmclient.h.html#STMClient::saved_termios" title='STMClient::saved_termios' data-ref="STMClient::saved_termios">saved_termios</a>;</td></tr>
<tr><th id="103">103</th><td></td></tr>
<tr><th id="104">104</th><td><u>#<span data-ppcond="104">ifdef</span> <a class="macro" href="../../config.h.html#94" data-ref="_M/HAVE_IUTF8">HAVE_IUTF8</a></u></td></tr>
<tr><th id="105">105</th><td>  <b>if</b> ( !(<a class="member" href="stmclient.h.html#STMClient::raw_termios" title='STMClient::raw_termios' data-ref="STMClient::raw_termios">raw_termios</a>.<a class="ref" href="../../../include/x86_64-linux-gnu/bits/termios.h.html#termios::c_iflag" title='termios::c_iflag' data-ref="termios::c_iflag">c_iflag</a> &amp; <a class="macro" href="../../../include/x86_64-linux-gnu/bits/termios.h.html#76" title="0040000" data-ref="_M/IUTF8">IUTF8</a>) ) {</td></tr>
<tr><th id="106">106</th><td>    <i>//    fprintf( stderr, "Warning: Locale is UTF-8 but termios IUTF8 flag not set. Setting IUTF8 flag.\n" );</i></td></tr>
<tr><th id="107">107</th><td>    <i>/* Probably not really necessary since we are putting terminal driver into raw mode anyway. */</i></td></tr>
<tr><th id="108">108</th><td>    <a class="member" href="stmclient.h.html#STMClient::raw_termios" title='STMClient::raw_termios' data-ref="STMClient::raw_termios">raw_termios</a>.<a class="ref" href="../../../include/x86_64-linux-gnu/bits/termios.h.html#termios::c_iflag" title='termios::c_iflag' data-ref="termios::c_iflag">c_iflag</a> |= <a class="macro" href="../../../include/x86_64-linux-gnu/bits/termios.h.html#76" title="0040000" data-ref="_M/IUTF8">IUTF8</a>;</td></tr>
<tr><th id="109">109</th><td>  }</td></tr>
<tr><th id="110">110</th><td><u>#<span data-ppcond="104">endif</span> /* HAVE_IUTF8 */</u></td></tr>
<tr><th id="111">111</th><td></td></tr>
<tr><th id="112">112</th><td>  <a class="ref" href="../../../include/termios.h.html#cfmakeraw" title='cfmakeraw' data-ref="cfmakeraw">cfmakeraw</a>( &amp;<a class="member" href="stmclient.h.html#STMClient::raw_termios" title='STMClient::raw_termios' data-ref="STMClient::raw_termios">raw_termios</a> );</td></tr>
<tr><th id="113">113</th><td></td></tr>
<tr><th id="114">114</th><td>  <b>if</b> ( <a class="ref" href="../../../include/termios.h.html#tcsetattr" title='tcsetattr' data-ref="tcsetattr">tcsetattr</a>( <a class="macro" href="../../../include/unistd.h.html#213" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a>, <a class="macro" href="../../../include/x86_64-linux-gnu/bits/termios.h.html#213" title="0" data-ref="_M/TCSANOW">TCSANOW</a>, &amp;<a class="member" href="stmclient.h.html#STMClient::raw_termios" title='STMClient::raw_termios' data-ref="STMClient::raw_termios">raw_termios</a> ) &lt; <var>0</var> ) {</td></tr>
<tr><th id="115">115</th><td>      <a class="ref" href="../../../include/stdio.h.html#perror" title='perror' data-ref="perror">perror</a>( <q>"tcsetattr"</q> );</td></tr>
<tr><th id="116">116</th><td>      <a class="ref" href="../../../include/stdlib.h.html#exit" title='exit' data-ref="exit">exit</a>( <var>1</var> );</td></tr>
<tr><th id="117">117</th><td>  }</td></tr>
<tr><th id="118">118</th><td></td></tr>
<tr><th id="119">119</th><td>  <i>/* Put terminal in application-cursor-key mode */</i></td></tr>
<tr><th id="120">120</th><td>  <a class="ref" href="../util/swrite.h.html#_Z6swriteiPKcl" title='swrite' data-ref="_Z6swriteiPKcl">swrite</a>( <a class="macro" href="../../../include/unistd.h.html#214" title="1" data-ref="_M/STDOUT_FILENO">STDOUT_FILENO</a>, <a class="member" href="stmclient.h.html#STMClient::display" title='STMClient::display' data-ref="STMClient::display">display</a>.<a class="ref" href="../terminal/terminaldisplay.h.html#_ZNK8Terminal7Display4openB5cxx11Ev" title='Terminal::Display::open' data-ref="_ZNK8Terminal7Display4openB5cxx11Ev">open</a>().<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>() );</td></tr>
<tr><th id="121">121</th><td></td></tr>
<tr><th id="122">122</th><td>  <i>/* Add our name to window title */</i></td></tr>
<tr><th id="123">123</th><td>  <b>if</b> ( !<a class="ref" href="../../../include/stdlib.h.html#getenv" title='getenv' data-ref="getenv">getenv</a>( <q>"MOSH_TITLE_NOPREFIX"</q> ) ) {</td></tr>
<tr><th id="124">124</th><td>    <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager16set_title_prefixERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEE" title='Overlay::OverlayManager::set_title_prefix' data-ref="_ZN7Overlay14OverlayManager16set_title_prefixERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEE">set_title_prefix</a>( <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> L<q>"[mosh] "</q> ) );</td></tr>
<tr><th id="125">125</th><td>  }</td></tr>
<tr><th id="126">126</th><td></td></tr>
<tr><th id="127">127</th><td>  <i>/* Set terminal escape key. */</i></td></tr>
<tr><th id="128">128</th><td>  <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="4escape_key_env" title='escape_key_env' data-type='const char *' data-ref="4escape_key_env">escape_key_env</dfn>;</td></tr>
<tr><th id="129">129</th><td>  <b>if</b> ( (<a class="local col4 ref" href="#4escape_key_env" title='escape_key_env' data-ref="4escape_key_env">escape_key_env</a> = <a class="ref" href="../../../include/stdlib.h.html#getenv" title='getenv' data-ref="getenv">getenv</a>( <q>"MOSH_ESCAPE_KEY"</q> )) != <span class="macro" title="__null" data-ref="_M/NULL">NULL</span> ) {</td></tr>
<tr><th id="130">130</th><td>    <b>if</b> ( <a class="ref" href="../../../include/string.h.html#strlen" title='strlen' data-ref="strlen">strlen</a>( <a class="local col4 ref" href="#4escape_key_env" title='escape_key_env' data-ref="4escape_key_env">escape_key_env</a> ) == <var>1</var> ) {</td></tr>
<tr><th id="131">131</th><td>      <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> = (<em>int</em>)<a class="local col4 ref" href="#4escape_key_env" title='escape_key_env' data-ref="4escape_key_env">escape_key_env</a>[<var>0</var>];</td></tr>
<tr><th id="132">132</th><td>      <b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> &gt; <var>0</var> &amp;&amp; <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> &lt; <var>128</var> ) {</td></tr>
<tr><th id="133">133</th><td>	<b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> &lt; <var>32</var> ) {</td></tr>
<tr><th id="134">134</th><td>	  <i>/* If escape is ctrl-something, pass it with repeating the key without ctrl. */</i></td></tr>
<tr><th id="135">135</th><td>	  <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a> = <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> + (<em>int</em>)<kbd>'@'</kbd>;</td></tr>
<tr><th id="136">136</th><td>	} <b>else</b> {</td></tr>
<tr><th id="137">137</th><td>	  <i>/* If escape is something else, pass it with repeating the key itself. */</i></td></tr>
<tr><th id="138">138</th><td>	  <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a> = <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a>;</td></tr>
<tr><th id="139">139</th><td>	}</td></tr>
<tr><th id="140">140</th><td>	<b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a> &gt;= <kbd>'A'</kbd> &amp;&amp; <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a> &lt;= <kbd>'Z'</kbd> ) {</td></tr>
<tr><th id="141">141</th><td>	  <i>/* If escape pass is an upper case character, define optional version</i></td></tr>
<tr><th id="142">142</th><td><i>	     as lower case of the same. */</i></td></tr>
<tr><th id="143">143</th><td>	  <a class="member" href="stmclient.h.html#STMClient::escape_pass_key2" title='STMClient::escape_pass_key2' data-ref="STMClient::escape_pass_key2">escape_pass_key2</a> = <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a> + (<em>int</em>)<kbd>'a'</kbd> - (<em>int</em>)<kbd>'A'</kbd>;</td></tr>
<tr><th id="144">144</th><td>	} <b>else</b> {</td></tr>
<tr><th id="145">145</th><td>	  <a class="member" href="stmclient.h.html#STMClient::escape_pass_key2" title='STMClient::escape_pass_key2' data-ref="STMClient::escape_pass_key2">escape_pass_key2</a> = <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a>;</td></tr>
<tr><th id="146">146</th><td>	}</td></tr>
<tr><th id="147">147</th><td>      } <b>else</b> {</td></tr>
<tr><th id="148">148</th><td>	<a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> = <var>0x1E</var>;</td></tr>
<tr><th id="149">149</th><td>	<a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a> = <kbd>'^'</kbd>;</td></tr>
<tr><th id="150">150</th><td>	<a class="member" href="stmclient.h.html#STMClient::escape_pass_key2" title='STMClient::escape_pass_key2' data-ref="STMClient::escape_pass_key2">escape_pass_key2</a> = <kbd>'^'</kbd>;</td></tr>
<tr><th id="151">151</th><td>      }</td></tr>
<tr><th id="152">152</th><td>    } <b>else</b> <b>if</b> ( <a class="ref" href="../../../include/string.h.html#strlen" title='strlen' data-ref="strlen">strlen</a>( <a class="local col4 ref" href="#4escape_key_env" title='escape_key_env' data-ref="4escape_key_env">escape_key_env</a> ) == <var>0</var> ) {</td></tr>
<tr><th id="153">153</th><td>      <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> = -<var>1</var>;</td></tr>
<tr><th id="154">154</th><td>    } <b>else</b> {</td></tr>
<tr><th id="155">155</th><td>      <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> = <var>0x1E</var>;</td></tr>
<tr><th id="156">156</th><td>      <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a> = <kbd>'^'</kbd>;</td></tr>
<tr><th id="157">157</th><td>      <a class="member" href="stmclient.h.html#STMClient::escape_pass_key2" title='STMClient::escape_pass_key2' data-ref="STMClient::escape_pass_key2">escape_pass_key2</a> = <kbd>'^'</kbd>;</td></tr>
<tr><th id="158">158</th><td>    }</td></tr>
<tr><th id="159">159</th><td>  } <b>else</b> {</td></tr>
<tr><th id="160">160</th><td>    <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> = <var>0x1E</var>;</td></tr>
<tr><th id="161">161</th><td>    <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a> = <kbd>'^'</kbd>;</td></tr>
<tr><th id="162">162</th><td>    <a class="member" href="stmclient.h.html#STMClient::escape_pass_key2" title='STMClient::escape_pass_key2' data-ref="STMClient::escape_pass_key2">escape_pass_key2</a> = <kbd>'^'</kbd>;</td></tr>
<tr><th id="163">163</th><td>  }</td></tr>
<tr><th id="164">164</th><td></td></tr>
<tr><th id="165">165</th><td>  <i>/* There are so many better ways to shoot oneself into leg than</i></td></tr>
<tr><th id="166">166</th><td><i>     setting escape key to Ctrl-C, Ctrl-D, NewLine, Ctrl-L or CarriageReturn</i></td></tr>
<tr><th id="167">167</th><td><i>     that we just won't allow that. */</i></td></tr>
<tr><th id="168">168</th><td>  <b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> == <var>0x03</var> || <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> == <var>0x04</var> || <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> == <var>0x0A</var> || <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> == <var>0x0C</var> || <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> == <var>0x0D</var> ) {</td></tr>
<tr><th id="169">169</th><td>    <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> = <var>0x1E</var>;</td></tr>
<tr><th id="170">170</th><td>    <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a> = <kbd>'^'</kbd>;</td></tr>
<tr><th id="171">171</th><td>    <a class="member" href="stmclient.h.html#STMClient::escape_pass_key2" title='STMClient::escape_pass_key2' data-ref="STMClient::escape_pass_key2">escape_pass_key2</a> = <kbd>'^'</kbd>;</td></tr>
<tr><th id="172">172</th><td>  }</td></tr>
<tr><th id="173">173</th><td></td></tr>
<tr><th id="174">174</th><td>  <i>/* Adjust escape help differently if escape is a control character. */</i></td></tr>
<tr><th id="175">175</th><td>  <b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> &gt; <var>0</var> ) {</td></tr>
<tr><th id="176">176</th><td>    <em>char</em> <dfn class="local col5 decl" id="5escape_pass_name_buf" title='escape_pass_name_buf' data-type='char [16]' data-ref="5escape_pass_name_buf">escape_pass_name_buf</dfn>[<var>16</var>];</td></tr>
<tr><th id="177">177</th><td>    <em>char</em> <dfn class="local col6 decl" id="6escape_key_name_buf" title='escape_key_name_buf' data-type='char [16]' data-ref="6escape_key_name_buf">escape_key_name_buf</dfn>[<var>16</var>];</td></tr>
<tr><th id="178">178</th><td>    <a class="ref" href="../../../include/stdio.h.html#snprintf" title='snprintf' data-ref="snprintf">snprintf</a>(<a class="local col5 ref" href="#5escape_pass_name_buf" title='escape_pass_name_buf' data-ref="5escape_pass_name_buf">escape_pass_name_buf</a>, <b>sizeof</b> <a class="local col5 ref" href="#5escape_pass_name_buf" title='escape_pass_name_buf' data-ref="5escape_pass_name_buf">escape_pass_name_buf</a>, <q>"\"%c\""</q>, <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a>);</td></tr>
<tr><th id="179">179</th><td>    <b>if</b> (<a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> &lt; <var>32</var>) {</td></tr>
<tr><th id="180">180</th><td>      <a class="ref" href="../../../include/stdio.h.html#snprintf" title='snprintf' data-ref="snprintf">snprintf</a>(<a class="local col6 ref" href="#6escape_key_name_buf" title='escape_key_name_buf' data-ref="6escape_key_name_buf">escape_key_name_buf</a>, <b>sizeof</b> <a class="local col6 ref" href="#6escape_key_name_buf" title='escape_key_name_buf' data-ref="6escape_key_name_buf">escape_key_name_buf</a>, <q>"Ctrl-%c"</q>, <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a>);</td></tr>
<tr><th id="181">181</th><td>      <a class="member" href="stmclient.h.html#STMClient::escape_requires_lf" title='STMClient::escape_requires_lf' data-ref="STMClient::escape_requires_lf">escape_requires_lf</a> = <b>false</b>;</td></tr>
<tr><th id="182">182</th><td>    } <b>else</b> {</td></tr>
<tr><th id="183">183</th><td>      <a class="ref" href="../../../include/stdio.h.html#snprintf" title='snprintf' data-ref="snprintf">snprintf</a>(<a class="local col6 ref" href="#6escape_key_name_buf" title='escape_key_name_buf' data-ref="6escape_key_name_buf">escape_key_name_buf</a>, <b>sizeof</b> <a class="local col6 ref" href="#6escape_key_name_buf" title='escape_key_name_buf' data-ref="6escape_key_name_buf">escape_key_name_buf</a>, <q>"\"%c\""</q>, <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a>);</td></tr>
<tr><th id="184">184</th><td>      <a class="member" href="stmclient.h.html#STMClient::escape_requires_lf" title='STMClient::escape_requires_lf' data-ref="STMClient::escape_requires_lf">escape_requires_lf</a> = <b>true</b>;</td></tr>
<tr><th id="185">185</th><td>    }</td></tr>
<tr><th id="186">186</th><td>    <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a> <a class="ref fake" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1Ev" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1Ev"></a><dfn class="local col7 decl" id="7tmp" title='tmp' data-type='string' data-ref="7tmp">tmp</dfn>;</td></tr>
<tr><th id="187">187</th><td>    <a class="local col7 ref" href="#7tmp" title='tmp' data-ref="7tmp">tmp</a> <a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringaSERKNS_12basic_stringIT_T0_T1_EE" title='std::__cxx11::basic_string::operator=' data-ref="_ZNSt7__cxx1112basic_stringaSERKNS_12basic_stringIT_T0_T1_EE">=</a> <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> <a class="local col5 ref" href="#5escape_pass_name_buf" title='escape_pass_name_buf' data-ref="5escape_pass_name_buf">escape_pass_name_buf</a> );</td></tr>
<tr><th id="188">188</th><td>    <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a> <dfn class="local col8 decl" id="8escape_pass_name" title='escape_pass_name' data-type='wstring' data-ref="8escape_pass_name">escape_pass_name</dfn> = <span class="namespace">std::</span><a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1ET_S1_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1ET_S1_RKT1_">(</a><a class="local col7 ref" href="#7tmp" title='tmp' data-ref="7tmp">tmp</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_string5beginEv" title='std::__cxx11::basic_string::begin' data-ref="_ZNSt7__cxx1112basic_string5beginEv">begin</a>(), <a class="local col7 ref" href="#7tmp" title='tmp' data-ref="7tmp">tmp</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_string3endEv" title='std::__cxx11::basic_string::end' data-ref="_ZNSt7__cxx1112basic_string3endEv">end</a>());</td></tr>
<tr><th id="189">189</th><td>    <a class="local col7 ref" href="#7tmp" title='tmp' data-ref="7tmp">tmp</a> <a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringaSERKNS_12basic_stringIT_T0_T1_EE" title='std::__cxx11::basic_string::operator=' data-ref="_ZNSt7__cxx1112basic_stringaSERKNS_12basic_stringIT_T0_T1_EE">=</a> <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> <a class="local col6 ref" href="#6escape_key_name_buf" title='escape_key_name_buf' data-ref="6escape_key_name_buf">escape_key_name_buf</a> );</td></tr>
<tr><th id="190">190</th><td>    <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a> <dfn class="local col9 decl" id="9escape_key_name" title='escape_key_name' data-type='wstring' data-ref="9escape_key_name">escape_key_name</dfn> = <span class="namespace">std::</span><a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1ET_S1_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1ET_S1_RKT1_">(</a><a class="local col7 ref" href="#7tmp" title='tmp' data-ref="7tmp">tmp</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_string5beginEv" title='std::__cxx11::basic_string::begin' data-ref="_ZNSt7__cxx1112basic_string5beginEv">begin</a>(), <a class="local col7 ref" href="#7tmp" title='tmp' data-ref="7tmp">tmp</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_string3endEv" title='std::__cxx11::basic_string::end' data-ref="_ZNSt7__cxx1112basic_string3endEv">end</a>());</td></tr>
<tr><th id="191">191</th><td>    <a class="member" href="stmclient.h.html#STMClient::escape_key_help" title='STMClient::escape_key_help' data-ref="STMClient::escape_key_help">escape_key_help</a> <a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringaSERKNS_12basic_stringIT_T0_T1_EE" title='std::__cxx11::basic_string::operator=' data-ref="_ZNSt7__cxx1112basic_stringaSERKNS_12basic_stringIT_T0_T1_EE">=</a> L<q>"Commands: Ctrl-Z suspends, \".\" quits, "</q> <a class="ref" href="../../../include/c++/5/bits/basic_string.tcc.html#_ZStplPKT_RKNSt7__cxx1112basic_stringIS_T0_T1_EE" title='std::operator+' data-ref="_ZStplPKT_RKNSt7__cxx1112basic_stringIS_T0_T1_EE">+</a> <a class="local col8 ref" href="#8escape_pass_name" title='escape_pass_name' data-ref="8escape_pass_name">escape_pass_name</a> <a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZStplRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" title='std::operator+' data-ref="_ZStplRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_">+</a> L<q>" gives literal "</q> <a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZStplRKNSt7__cxx1112basic_stringIT_T0_T1_EES6_" title='std::operator+' data-ref="_ZStplRKNSt7__cxx1112basic_stringIT_T0_T1_EES6_">+</a> <a class="local col9 ref" href="#9escape_key_name" title='escape_key_name' data-ref="9escape_key_name">escape_key_name</a>;</td></tr>
<tr><th id="192">192</th><td>    <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine21set_escape_key_stringERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='Overlay::NotificationEngine::set_escape_key_string' data-ref="_ZN7Overlay18NotificationEngine21set_escape_key_stringERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">set_escape_key_string</a>( <a class="local col7 ref" href="#7tmp" title='tmp' data-ref="7tmp">tmp</a> );</td></tr>
<tr><th id="193">193</th><td>  }</td></tr>
<tr><th id="194">194</th><td>  <em>wchar_t</em> <dfn class="local col0 decl" id="10tmp" title='tmp' data-type='wchar_t [128]' data-ref="10tmp">tmp</dfn>[ <var>128</var> ];</td></tr>
<tr><th id="195">195</th><td>  <a class="ref" href="../../../include/wchar.h.html#swprintf" title='swprintf' data-ref="swprintf">swprintf</a>( <a class="local col0 ref" href="#10tmp" title='tmp' data-ref="10tmp">tmp</a>, <var>128</var>, L<q>"Nothing received from server on UDP port %s."</q>, <a class="member" href="stmclient.h.html#STMClient::port" title='STMClient::port' data-ref="STMClient::port">port</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>() );</td></tr>
<tr><th id="196">196</th><td>  <a class="member" href="stmclient.h.html#STMClient::connecting_notification" title='STMClient::connecting_notification' data-ref="STMClient::connecting_notification">connecting_notification</a> <a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringaSERKNS_12basic_stringIT_T0_T1_EE" title='std::__cxx11::basic_string::operator=' data-ref="_ZNSt7__cxx1112basic_stringaSERKNS_12basic_stringIT_T0_T1_EE">=</a> <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> <a class="local col0 ref" href="#10tmp" title='tmp' data-ref="10tmp">tmp</a> );</td></tr>
<tr><th id="197">197</th><td>}</td></tr>
<tr><th id="198">198</th><td></td></tr>
<tr><th id="199">199</th><td><em>void</em> <a class="type" href="stmclient.h.html#STMClient" title='STMClient' data-ref="STMClient">STMClient</a>::<dfn class="decl def" id="_ZN9STMClient8shutdownEv" title='STMClient::shutdown' data-ref="_ZN9STMClient8shutdownEv">shutdown</dfn>( <em>void</em> )</td></tr>
<tr><th id="200">200</th><td>{</td></tr>
<tr><th id="201">201</th><td>  <i>/* Restore screen state */</i></td></tr>
<tr><th id="202">202</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb" title='Overlay::NotificationEngine::set_notification_string' data-ref="_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb">set_notification_string</a>( <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> L<q>""</q> ) );</td></tr>
<tr><th id="203">203</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine12server_heardEm" title='Overlay::NotificationEngine::server_heard' data-ref="_ZN7Overlay18NotificationEngine12server_heardEm">server_heard</a>( <a class="ref" href="../network/network.h.html#_ZN7Network9timestampEv" title='Network::timestamp' data-ref="_ZN7Network9timestampEv">timestamp</a>() );</td></tr>
<tr><th id="204">204</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager16set_title_prefixERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEE" title='Overlay::OverlayManager::set_title_prefix' data-ref="_ZN7Overlay14OverlayManager16set_title_prefixERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEE">set_title_prefix</a>( <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> L<q>""</q> ) );</td></tr>
<tr><th id="205">205</th><td>  <a class="member" href="#_ZN9STMClient16output_new_frameEv" title='STMClient::output_new_frame' data-ref="_ZN9STMClient16output_new_frameEv">output_new_frame</a>();</td></tr>
<tr><th id="206">206</th><td></td></tr>
<tr><th id="207">207</th><td>  <i>/* Restore terminal and terminal-driver state */</i></td></tr>
<tr><th id="208">208</th><td>  <a class="ref" href="../util/swrite.h.html#_Z6swriteiPKcl" title='swrite' data-ref="_Z6swriteiPKcl">swrite</a>( <a class="macro" href="../../../include/unistd.h.html#214" title="1" data-ref="_M/STDOUT_FILENO">STDOUT_FILENO</a>, <a class="member" href="stmclient.h.html#STMClient::display" title='STMClient::display' data-ref="STMClient::display">display</a>.<a class="ref" href="../terminal/terminaldisplay.h.html#_ZNK8Terminal7Display5closeB5cxx11Ev" title='Terminal::Display::close' data-ref="_ZNK8Terminal7Display5closeB5cxx11Ev">close</a>().<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>() );</td></tr>
<tr><th id="209">209</th><td>  </td></tr>
<tr><th id="210">210</th><td>  <b>if</b> ( <a class="ref" href="../../../include/termios.h.html#tcsetattr" title='tcsetattr' data-ref="tcsetattr">tcsetattr</a>( <a class="macro" href="../../../include/unistd.h.html#213" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a>, <a class="macro" href="../../../include/x86_64-linux-gnu/bits/termios.h.html#213" title="0" data-ref="_M/TCSANOW">TCSANOW</a>, &amp;<a class="member" href="stmclient.h.html#STMClient::saved_termios" title='STMClient::saved_termios' data-ref="STMClient::saved_termios">saved_termios</a> ) &lt; <var>0</var> ) {</td></tr>
<tr><th id="211">211</th><td>    <a class="ref" href="../../../include/stdio.h.html#perror" title='perror' data-ref="perror">perror</a>( <q>"tcsetattr"</q> );</td></tr>
<tr><th id="212">212</th><td>    <a class="ref" href="../../../include/stdlib.h.html#exit" title='exit' data-ref="exit">exit</a>( <var>1</var> );</td></tr>
<tr><th id="213">213</th><td>  }</td></tr>
<tr><th id="214">214</th><td></td></tr>
<tr><th id="215">215</th><td>  <b>if</b> ( <a class="member" href="stmclient.h.html#_ZNK9STMClient16still_connectingEv" title='STMClient::still_connecting' data-ref="_ZNK9STMClient16still_connectingEv">still_connecting</a>() ) {</td></tr>
<tr><th id="216">216</th><td>    <a class="ref" href="../../../include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf">fprintf</a>( <a class="macro" href="../../../include/stdio.h.html#174" title="stderr" data-ref="_M/stderr">stderr</a>, <q>"\nmosh did not make a successful connection to %s:%s.\n"</q></td></tr>
<tr><th id="217">217</th><td>	     <q>"Please verify that UDP port %s is not firewalled and can reach the server.\n\n"</q></td></tr>
<tr><th id="218">218</th><td>	     <q>"(By default, mosh uses a UDP port between 60000 and 61000. The -p option\n"</q></td></tr>
<tr><th id="219">219</th><td>	     <q>"selects a specific UDP port number.)\n"</q>, <a class="member" href="stmclient.h.html#STMClient::ip" title='STMClient::ip' data-ref="STMClient::ip">ip</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>(), <a class="member" href="stmclient.h.html#STMClient::port" title='STMClient::port' data-ref="STMClient::port">port</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>(), <a class="member" href="stmclient.h.html#STMClient::port" title='STMClient::port' data-ref="STMClient::port">port</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>() );</td></tr>
<tr><th id="220">220</th><td>  } <b>else</b> <b>if</b> ( <a class="ref fake" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrcvMNS_12__shared_ptrIT_XT0_EEEPS2_Ev" title='std::tr1::__shared_ptr::operator type-parameter-0-0 *__shared_ptr&lt;_Tp, _Lp&gt;::*' data-ref="_ZNKSt3tr112__shared_ptrcvMNS_12__shared_ptrIT_XT0_EEEPS2_Ev"></a><a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a> &amp;&amp; !<a class="member" href="stmclient.h.html#STMClient::clean_shutdown" title='STMClient::clean_shutdown' data-ref="STMClient::clean_shutdown">clean_shutdown</a> ) {</td></tr>
<tr><th id="221">221</th><td>    <a class="ref" href="../../../include/stdio.h.html#fputs" title='fputs' data-ref="fputs">fputs</a>( <q>"\n\nmosh did not shut down cleanly. Please note that the\n"</q></td></tr>
<tr><th id="222">222</th><td>	   <q>"mosh-server process may still be running on the server.\n"</q>, <a class="macro" href="../../../include/stdio.h.html#174" title="stderr" data-ref="_M/stderr">stderr</a> );</td></tr>
<tr><th id="223">223</th><td>  }</td></tr>
<tr><th id="224">224</th><td>}</td></tr>
<tr><th id="225">225</th><td></td></tr>
<tr><th id="226">226</th><td><em>void</em> <a class="type" href="stmclient.h.html#STMClient" title='STMClient' data-ref="STMClient">STMClient</a>::<dfn class="decl def" id="_ZN9STMClient9main_initEv" title='STMClient::main_init' data-ref="_ZN9STMClient9main_initEv">main_init</dfn>( <em>void</em> )</td></tr>
<tr><th id="227">227</th><td>{</td></tr>
<tr><th id="228">228</th><td>  <a class="type" href="../util/select.h.html#Select" title='Select' data-ref="Select">Select</a> &amp;<dfn class="local col1 decl" id="11sel" title='sel' data-type='Select &amp;' data-ref="11sel">sel</dfn> = <a class="type" href="../util/select.h.html#Select" title='Select' data-ref="Select">Select</a>::<a class="ref" href="../util/select.h.html#_ZN6Select12get_instanceEv" title='Select::get_instance' data-ref="_ZN6Select12get_instanceEv">get_instance</a>();</td></tr>
<tr><th id="229">229</th><td>  <a class="local col1 ref" href="#11sel" title='sel' data-ref="11sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select10add_signalEi" title='Select::add_signal' data-ref="_ZN6Select10add_signalEi">add_signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#61" title="28" data-ref="_M/SIGWINCH">SIGWINCH</a> );</td></tr>
<tr><th id="230">230</th><td>  <a class="local col1 ref" href="#11sel" title='sel' data-ref="11sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select10add_signalEi" title='Select::add_signal' data-ref="_ZN6Select10add_signalEi">add_signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#47" title="15" data-ref="_M/SIGTERM">SIGTERM</a> );</td></tr>
<tr><th id="231">231</th><td>  <a class="local col1 ref" href="#11sel" title='sel' data-ref="11sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select10add_signalEi" title='Select::add_signal' data-ref="_ZN6Select10add_signalEi">add_signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#33" title="2" data-ref="_M/SIGINT">SIGINT</a> );</td></tr>
<tr><th id="232">232</th><td>  <a class="local col1 ref" href="#11sel" title='sel' data-ref="11sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select10add_signalEi" title='Select::add_signal' data-ref="_ZN6Select10add_signalEi">add_signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#32" title="1" data-ref="_M/SIGHUP">SIGHUP</a> );</td></tr>
<tr><th id="233">233</th><td>  <a class="local col1 ref" href="#11sel" title='sel' data-ref="11sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select10add_signalEi" title='Select::add_signal' data-ref="_ZN6Select10add_signalEi">add_signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#45" title="13" data-ref="_M/SIGPIPE">SIGPIPE</a> );</td></tr>
<tr><th id="234">234</th><td>  <a class="local col1 ref" href="#11sel" title='sel' data-ref="11sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select10add_signalEi" title='Select::add_signal' data-ref="_ZN6Select10add_signalEi">add_signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#51" title="18" data-ref="_M/SIGCONT">SIGCONT</a> );</td></tr>
<tr><th id="235">235</th><td></td></tr>
<tr><th id="236">236</th><td>  <i>/* get initial window size */</i></td></tr>
<tr><th id="237">237</th><td>  <b>if</b> ( <a class="ref" href="../../../include/x86_64-linux-gnu/sys/ioctl.h.html#ioctl" title='ioctl' data-ref="ioctl">ioctl</a>( <a class="macro" href="../../../include/unistd.h.html#213" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a>, <a class="macro" href="../../../include/asm-generic/ioctls.h.html#37" title="0x5413" data-ref="_M/TIOCGWINSZ">TIOCGWINSZ</a>, &amp;<a class="member" href="stmclient.h.html#STMClient::window_size" title='STMClient::window_size' data-ref="STMClient::window_size">window_size</a> ) &lt; <var>0</var> ) {</td></tr>
<tr><th id="238">238</th><td>    <a class="ref" href="../../../include/stdio.h.html#perror" title='perror' data-ref="perror">perror</a>( <q>"ioctl TIOCGWINSZ"</q> );</td></tr>
<tr><th id="239">239</th><td>    <b>return</b>;</td></tr>
<tr><th id="240">240</th><td>  }  </td></tr>
<tr><th id="241">241</th><td></td></tr>
<tr><th id="242">242</th><td>  <i>/* local state */</i></td></tr>
<tr><th id="243">243</th><td>  <a class="member" href="stmclient.h.html#STMClient::local_framebuffer" title='STMClient::local_framebuffer' data-ref="STMClient::local_framebuffer">local_framebuffer</a> <a class="ref" href="../terminal/terminalframebuffer.h.html#_ZN8Terminal11FramebufferaSERKS0_" title='Terminal::Framebuffer::operator=' data-ref="_ZN8Terminal11FramebufferaSERKS0_">=</a> <span class="namespace">Terminal::</span><a class="type" href="../terminal/terminalframebuffer.h.html#Terminal::Framebuffer" title='Terminal::Framebuffer' data-ref="Terminal::Framebuffer">Framebuffer</a><a class="ref" href="../terminal/terminalframebuffer.h.html#_ZN8Terminal11FramebufferC1Eii" title='Terminal::Framebuffer::Framebuffer' data-ref="_ZN8Terminal11FramebufferC1Eii">(</a> <a class="member" href="stmclient.h.html#STMClient::window_size" title='STMClient::window_size' data-ref="STMClient::window_size">window_size</a>.<a class="ref" href="../../../include/x86_64-linux-gnu/bits/ioctl-types.h.html#winsize::ws_col" title='winsize::ws_col' data-ref="winsize::ws_col">ws_col</a>, <a class="member" href="stmclient.h.html#STMClient::window_size" title='STMClient::window_size' data-ref="STMClient::window_size">window_size</a>.<a class="ref" href="../../../include/x86_64-linux-gnu/bits/ioctl-types.h.html#winsize::ws_row" title='winsize::ws_row' data-ref="winsize::ws_row">ws_row</a> );</td></tr>
<tr><th id="244">244</th><td>  <a class="member" href="stmclient.h.html#STMClient::new_state" title='STMClient::new_state' data-ref="STMClient::new_state">new_state</a> <a class="ref" href="../terminal/terminalframebuffer.h.html#_ZN8Terminal11FramebufferaSERKS0_" title='Terminal::Framebuffer::operator=' data-ref="_ZN8Terminal11FramebufferaSERKS0_">=</a> <span class="namespace">Terminal::</span><a class="type" href="../terminal/terminalframebuffer.h.html#Terminal::Framebuffer" title='Terminal::Framebuffer' data-ref="Terminal::Framebuffer">Framebuffer</a><a class="ref" href="../terminal/terminalframebuffer.h.html#_ZN8Terminal11FramebufferC1Eii" title='Terminal::Framebuffer::Framebuffer' data-ref="_ZN8Terminal11FramebufferC1Eii">(</a> <var>1</var>, <var>1</var> );</td></tr>
<tr><th id="245">245</th><td></td></tr>
<tr><th id="246">246</th><td>  <i>/* initialize screen */</i></td></tr>
<tr><th id="247">247</th><td>  <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a> <dfn class="local col2 decl" id="12init" title='init' data-type='string' data-ref="12init">init</dfn> = <a class="member" href="stmclient.h.html#STMClient::display" title='STMClient::display' data-ref="STMClient::display">display</a>.<a class="ref" href="../terminal/terminaldisplay.h.html#_ZNK8Terminal7Display9new_frameB5cxx11EbRKNS_11FramebufferES3_" title='Terminal::Display::new_frame' data-ref="_ZNK8Terminal7Display9new_frameB5cxx11EbRKNS_11FramebufferES3_">new_frame</a>( <b>false</b>, <a class="member" href="stmclient.h.html#STMClient::local_framebuffer" title='STMClient::local_framebuffer' data-ref="STMClient::local_framebuffer">local_framebuffer</a>, <a class="member" href="stmclient.h.html#STMClient::local_framebuffer" title='STMClient::local_framebuffer' data-ref="STMClient::local_framebuffer">local_framebuffer</a> );</td></tr>
<tr><th id="248">248</th><td>  <a class="ref" href="../util/swrite.h.html#_Z6swriteiPKcl" title='swrite' data-ref="_Z6swriteiPKcl">swrite</a>( <a class="macro" href="../../../include/unistd.h.html#214" title="1" data-ref="_M/STDOUT_FILENO">STDOUT_FILENO</a>, <a class="local col2 ref" href="#12init" title='init' data-ref="12init">init</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string4dataEv" title='std::__cxx11::basic_string::data' data-ref="_ZNKSt7__cxx1112basic_string4dataEv">data</a>(), <a class="local col2 ref" href="#12init" title='init' data-ref="12init">init</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string4sizeEv" title='std::__cxx11::basic_string::size' data-ref="_ZNKSt7__cxx1112basic_string4sizeEv">size</a>() );</td></tr>
<tr><th id="249">249</th><td></td></tr>
<tr><th id="250">250</th><td>  <i>/* open network */</i></td></tr>
<tr><th id="251">251</th><td>  <span class="namespace">Network::</span><a class="type" href="../statesync/user.h.html#Network::UserStream" title='Network::UserStream' data-ref="Network::UserStream">UserStream</a> <a class="ref fake" href="../statesync/user.h.html#_ZN7Network10UserStreamC1Ev" title='Network::UserStream::UserStream' data-ref="_ZN7Network10UserStreamC1Ev"></a><dfn class="local col3 decl" id="13blank" title='blank' data-type='Network::UserStream' data-ref="13blank">blank</dfn>;</td></tr>
<tr><th id="252">252</th><td>  <span class="namespace">Terminal::</span><a class="type" href="../statesync/completeterminal.h.html#Terminal::Complete" title='Terminal::Complete' data-ref="Terminal::Complete">Complete</a> <dfn class="local col4 decl" id="14local_terminal" title='local_terminal' data-type='Terminal::Complete' data-ref="14local_terminal">local_terminal</dfn><a class="ref" href="../statesync/completeterminal.h.html#_ZN8Terminal8CompleteC1Emm" title='Terminal::Complete::Complete' data-ref="_ZN8Terminal8CompleteC1Emm">(</a> <a class="member" href="stmclient.h.html#STMClient::window_size" title='STMClient::window_size' data-ref="STMClient::window_size">window_size</a>.<a class="ref" href="../../../include/x86_64-linux-gnu/bits/ioctl-types.h.html#winsize::ws_col" title='winsize::ws_col' data-ref="winsize::ws_col">ws_col</a>, <a class="member" href="stmclient.h.html#STMClient::window_size" title='STMClient::window_size' data-ref="STMClient::window_size">window_size</a>.<a class="ref" href="../../../include/x86_64-linux-gnu/bits/ioctl-types.h.html#winsize::ws_row" title='winsize::ws_row' data-ref="winsize::ws_row">ws_row</a> );</td></tr>
<tr><th id="253">253</th><td>  <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a> <a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#985" title='std::tr1::shared_ptr&lt;Network::Transport&lt;Network::UserStream, Terminal::Complete&gt; &gt;::operator=' data-ref="_ZNSt3tr110shared_ptrIN7Network9TransportINS1_10UserStreamEN8Terminal8CompleteEEEEaSERKS7_">=</a> <a class="typedef" href="stmclient.h.html#STMClient::NetworkPointer" title='STMClient::NetworkPointer' data-type='shared::shared_ptr&lt;NetworkType&gt;' data-ref="STMClient::NetworkPointer">NetworkPointer</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNSt3tr110shared_ptrC1EPT_" title='std::tr1::shared_ptr::shared_ptr&lt;_Tp&gt;' data-ref="_ZNSt3tr110shared_ptrC1EPT_">(</a> <b>new</b> <a class="typedef" href="stmclient.h.html#STMClient::NetworkType" title='STMClient::NetworkType' data-type='Network::Transport&lt;Network::UserStream, Terminal::Complete&gt;' data-ref="STMClient::NetworkType">NetworkType</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9TransportC1ERT_RT0_PKcS6_S6_" title='Network::Transport::Transport&lt;MyState, RemoteState&gt;' data-ref="_ZN7Network9TransportC1ERT_RT0_PKcS6_S6_">(</a> <a class="local col3 ref" href="#13blank" title='blank' data-ref="13blank">blank</a>, <a class="local col4 ref" href="#14local_terminal" title='local_terminal' data-ref="14local_terminal">local_terminal</a>, <a class="member" href="stmclient.h.html#STMClient::key" title='STMClient::key' data-ref="STMClient::key">key</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>(), <a class="member" href="stmclient.h.html#STMClient::ip" title='STMClient::ip' data-ref="STMClient::ip">ip</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>(), <a class="member" href="stmclient.h.html#STMClient::port" title='STMClient::port' data-ref="STMClient::port">port</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>() ) );</td></tr>
<tr><th id="254">254</th><td></td></tr>
<tr><th id="255">255</th><td>  <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport14set_send_delayEi" title='Network::Transport::set_send_delay' data-ref="_ZN7Network9Transport14set_send_delayEi">set_send_delay</a>( <var>1</var> ); <i>/* minimal delay on outgoing keystrokes */</i></td></tr>
<tr><th id="256">256</th><td></td></tr>
<tr><th id="257">257</th><td>  <i>/* tell server the size of the terminal */</i></td></tr>
<tr><th id="258">258</th><td>  <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport17get_current_stateEv" title='Network::Transport::get_current_state' data-ref="_ZN7Network9Transport17get_current_stateEv">get_current_state</a>().<a class="ref" href="../statesync/user.h.html#_ZN7Network10UserStream9push_backERKN6Parser6ResizeE" title='Network::UserStream::push_back' data-ref="_ZN7Network10UserStream9push_backERKN6Parser6ResizeE">push_back</a>( <span class="namespace">Parser::</span><a class="type" href="../terminal/parseraction.h.html#Parser::Resize" title='Parser::Resize' data-ref="Parser::Resize">Resize</a><a class="ref" href="../terminal/parseraction.h.html#_ZN6Parser6ResizeC1Emm" title='Parser::Resize::Resize' data-ref="_ZN6Parser6ResizeC1Emm">(</a> <a class="member" href="stmclient.h.html#STMClient::window_size" title='STMClient::window_size' data-ref="STMClient::window_size">window_size</a>.<a class="ref" href="../../../include/x86_64-linux-gnu/bits/ioctl-types.h.html#winsize::ws_col" title='winsize::ws_col' data-ref="winsize::ws_col">ws_col</a>, <a class="member" href="stmclient.h.html#STMClient::window_size" title='STMClient::window_size' data-ref="STMClient::window_size">window_size</a>.<a class="ref" href="../../../include/x86_64-linux-gnu/bits/ioctl-types.h.html#winsize::ws_row" title='winsize::ws_row' data-ref="winsize::ws_row">ws_row</a> ) );</td></tr>
<tr><th id="259">259</th><td></td></tr>
<tr><th id="260">260</th><td>  <i>/* be noisy as necessary */</i></td></tr>
<tr><th id="261">261</th><td>  <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport11set_verboseEj" title='Network::Transport::set_verbose' data-ref="_ZN7Network9Transport11set_verboseEj">set_verbose</a>( <a class="member" href="stmclient.h.html#STMClient::verbose" title='STMClient::verbose' data-ref="STMClient::verbose">verbose</a> );</td></tr>
<tr><th id="262">262</th><td>  <a class="type" href="../util/select.h.html#Select" title='Select' data-ref="Select">Select</a>::<a class="ref" href="../util/select.h.html#_ZN6Select11set_verboseEj" title='Select::set_verbose' data-ref="_ZN6Select11set_verboseEj">set_verbose</a>( <a class="member" href="stmclient.h.html#STMClient::verbose" title='STMClient::verbose' data-ref="STMClient::verbose">verbose</a> );</td></tr>
<tr><th id="263">263</th><td>}</td></tr>
<tr><th id="264">264</th><td></td></tr>
<tr><th id="265">265</th><td><em>void</em> <a class="type" href="stmclient.h.html#STMClient" title='STMClient' data-ref="STMClient">STMClient</a>::<dfn class="decl def" id="_ZN9STMClient16output_new_frameEv" title='STMClient::output_new_frame' data-ref="_ZN9STMClient16output_new_frameEv">output_new_frame</dfn>( <em>void</em> )</td></tr>
<tr><th id="266">266</th><td>{</td></tr>
<tr><th id="267">267</th><td>  <b>if</b> ( !<a class="ref fake" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrcvMNS_12__shared_ptrIT_XT0_EEEPS2_Ev" title='std::tr1::__shared_ptr::operator type-parameter-0-0 *__shared_ptr&lt;_Tp, _Lp&gt;::*' data-ref="_ZNKSt3tr112__shared_ptrcvMNS_12__shared_ptrIT_XT0_EEEPS2_Ev"></a><a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a> ) { <i>/* clean shutdown even when not initialized */</i></td></tr>
<tr><th id="268">268</th><td>    <b>return</b>;</td></tr>
<tr><th id="269">269</th><td>  }</td></tr>
<tr><th id="270">270</th><td></td></tr>
<tr><th id="271">271</th><td>  <i>/* fetch target state */</i></td></tr>
<tr><th id="272">272</th><td>  <a class="member" href="stmclient.h.html#STMClient::new_state" title='STMClient::new_state' data-ref="STMClient::new_state">new_state</a> <a class="ref" href="../terminal/terminalframebuffer.h.html#_ZN8Terminal11FramebufferaSERKS0_" title='Terminal::Framebuffer::operator=' data-ref="_ZN8Terminal11FramebufferaSERKS0_">=</a> <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport23get_latest_remote_stateEv" title='Network::Transport::get_latest_remote_state' data-ref="_ZNK7Network9Transport23get_latest_remote_stateEv">get_latest_remote_state</a>().<a class="ref" href="../network/transportstate.h.html#Network::TimestampedState::state" title='Network::TimestampedState&lt;Terminal::Complete&gt;::state' data-ref="Network::TimestampedState::state">state</a>.<a class="ref" href="../statesync/completeterminal.h.html#_ZNK8Terminal8Complete6get_fbEv" title='Terminal::Complete::get_fb' data-ref="_ZNK8Terminal8Complete6get_fbEv">get_fb</a>();</td></tr>
<tr><th id="273">273</th><td></td></tr>
<tr><th id="274">274</th><td>  <i>/* apply local overlays */</i></td></tr>
<tr><th id="275">275</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager5applyERN8Terminal11FramebufferE" title='Overlay::OverlayManager::apply' data-ref="_ZN7Overlay14OverlayManager5applyERN8Terminal11FramebufferE">apply</a>( <span class='refarg'><a class="member" href="stmclient.h.html#STMClient::new_state" title='STMClient::new_state' data-ref="STMClient::new_state">new_state</a></span> );</td></tr>
<tr><th id="276">276</th><td></td></tr>
<tr><th id="277">277</th><td>  <i>/* calculate minimal difference from where we are */</i></td></tr>
<tr><th id="278">278</th><td>  <em>const</em> <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a> <dfn class="local col5 decl" id="15diff" title='diff' data-type='const string' data-ref="15diff">diff</dfn><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1ERKNS_12basic_stringIT_T0_T1_EE" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1ERKNS_12basic_stringIT_T0_T1_EE">(</a> <a class="member" href="stmclient.h.html#STMClient::display" title='STMClient::display' data-ref="STMClient::display">display</a>.<a class="ref" href="../terminal/terminaldisplay.h.html#_ZNK8Terminal7Display9new_frameB5cxx11EbRKNS_11FramebufferES3_" title='Terminal::Display::new_frame' data-ref="_ZNK8Terminal7Display9new_frameB5cxx11EbRKNS_11FramebufferES3_">new_frame</a>( !<a class="member" href="stmclient.h.html#STMClient::repaint_requested" title='STMClient::repaint_requested' data-ref="STMClient::repaint_requested">repaint_requested</a>,</td></tr>
<tr><th id="279">279</th><td>					<a class="member" href="stmclient.h.html#STMClient::local_framebuffer" title='STMClient::local_framebuffer' data-ref="STMClient::local_framebuffer">local_framebuffer</a>,</td></tr>
<tr><th id="280">280</th><td>					<a class="member" href="stmclient.h.html#STMClient::new_state" title='STMClient::new_state' data-ref="STMClient::new_state">new_state</a> ) );</td></tr>
<tr><th id="281">281</th><td>  <a class="ref" href="../util/swrite.h.html#_Z6swriteiPKcl" title='swrite' data-ref="_Z6swriteiPKcl">swrite</a>( <a class="macro" href="../../../include/unistd.h.html#214" title="1" data-ref="_M/STDOUT_FILENO">STDOUT_FILENO</a>, <a class="local col5 ref" href="#15diff" title='diff' data-ref="15diff">diff</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string4dataEv" title='std::__cxx11::basic_string::data' data-ref="_ZNKSt7__cxx1112basic_string4dataEv">data</a>(), <a class="local col5 ref" href="#15diff" title='diff' data-ref="15diff">diff</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string4sizeEv" title='std::__cxx11::basic_string::size' data-ref="_ZNKSt7__cxx1112basic_string4sizeEv">size</a>() );</td></tr>
<tr><th id="282">282</th><td></td></tr>
<tr><th id="283">283</th><td>  <a class="member" href="stmclient.h.html#STMClient::repaint_requested" title='STMClient::repaint_requested' data-ref="STMClient::repaint_requested">repaint_requested</a> = <b>false</b>;</td></tr>
<tr><th id="284">284</th><td></td></tr>
<tr><th id="285">285</th><td>  <a class="member" href="stmclient.h.html#STMClient::local_framebuffer" title='STMClient::local_framebuffer' data-ref="STMClient::local_framebuffer">local_framebuffer</a> <a class="ref" href="../terminal/terminalframebuffer.h.html#_ZN8Terminal11FramebufferaSERKS0_" title='Terminal::Framebuffer::operator=' data-ref="_ZN8Terminal11FramebufferaSERKS0_">=</a> <a class="member" href="stmclient.h.html#STMClient::new_state" title='STMClient::new_state' data-ref="STMClient::new_state">new_state</a>;</td></tr>
<tr><th id="286">286</th><td>}</td></tr>
<tr><th id="287">287</th><td></td></tr>
<tr><th id="288">288</th><td><em>void</em> <a class="type" href="stmclient.h.html#STMClient" title='STMClient' data-ref="STMClient">STMClient</a>::<dfn class="decl def" id="_ZN9STMClient21process_network_inputEv" title='STMClient::process_network_input' data-ref="_ZN9STMClient21process_network_inputEv">process_network_input</dfn>( <em>void</em> )</td></tr>
<tr><th id="289">289</th><td>{</td></tr>
<tr><th id="290">290</th><td>  <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport4recvEv" title='Network::Transport::recv' data-ref="_ZN7Network9Transport4recvEv">recv</a>();</td></tr>
<tr><th id="291">291</th><td>  </td></tr>
<tr><th id="292">292</th><td>  <i>/* Now give hints to the overlays */</i></td></tr>
<tr><th id="293">293</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine12server_heardEm" title='Overlay::NotificationEngine::server_heard' data-ref="_ZN7Overlay18NotificationEngine12server_heardEm">server_heard</a>( <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport23get_latest_remote_stateEv" title='Network::Transport::get_latest_remote_state' data-ref="_ZNK7Network9Transport23get_latest_remote_stateEv">get_latest_remote_state</a>().<a class="ref" href="../network/transportstate.h.html#Network::TimestampedState::timestamp" title='Network::TimestampedState&lt;Terminal::Complete&gt;::timestamp' data-ref="Network::TimestampedState::timestamp">timestamp</a> );</td></tr>
<tr><th id="294">294</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine12server_ackedEm" title='Overlay::NotificationEngine::server_acked' data-ref="_ZN7Overlay18NotificationEngine12server_ackedEm">server_acked</a>( <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport30get_sent_state_acked_timestampEv" title='Network::Transport::get_sent_state_acked_timestamp' data-ref="_ZNK7Network9Transport30get_sent_state_acked_timestampEv">get_sent_state_acked_timestamp</a>() );</td></tr>
<tr><th id="295">295</th><td></td></tr>
<tr><th id="296">296</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager21get_prediction_engineEv" title='Overlay::OverlayManager::get_prediction_engine' data-ref="_ZN7Overlay14OverlayManager21get_prediction_engineEv">get_prediction_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay16PredictionEngine21set_local_frame_ackedEm" title='Overlay::PredictionEngine::set_local_frame_acked' data-ref="_ZN7Overlay16PredictionEngine21set_local_frame_ackedEm">set_local_frame_acked</a>( <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20get_sent_state_ackedEv" title='Network::Transport::get_sent_state_acked' data-ref="_ZNK7Network9Transport20get_sent_state_ackedEv">get_sent_state_acked</a>() );</td></tr>
<tr><th id="297">297</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager21get_prediction_engineEv" title='Overlay::OverlayManager::get_prediction_engine' data-ref="_ZN7Overlay14OverlayManager21get_prediction_engineEv">get_prediction_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay16PredictionEngine17set_send_intervalEj" title='Overlay::PredictionEngine::set_send_interval' data-ref="_ZN7Overlay16PredictionEngine17set_send_intervalEj">set_send_interval</a>( <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport13send_intervalEv" title='Network::Transport::send_interval' data-ref="_ZNK7Network9Transport13send_intervalEv">send_interval</a>() );</td></tr>
<tr><th id="298">298</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager21get_prediction_engineEv" title='Overlay::OverlayManager::get_prediction_engine' data-ref="_ZN7Overlay14OverlayManager21get_prediction_engineEv">get_prediction_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay16PredictionEngine26set_local_frame_late_ackedEm" title='Overlay::PredictionEngine::set_local_frame_late_acked' data-ref="_ZN7Overlay16PredictionEngine26set_local_frame_late_ackedEm">set_local_frame_late_acked</a>( <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport23get_latest_remote_stateEv" title='Network::Transport::get_latest_remote_state' data-ref="_ZNK7Network9Transport23get_latest_remote_stateEv">get_latest_remote_state</a>().<a class="ref" href="../network/transportstate.h.html#Network::TimestampedState::state" title='Network::TimestampedState&lt;Terminal::Complete&gt;::state' data-ref="Network::TimestampedState::state">state</a>.<a class="ref" href="../statesync/completeterminal.h.html#_ZNK8Terminal8Complete12get_echo_ackEv" title='Terminal::Complete::get_echo_ack' data-ref="_ZNK8Terminal8Complete12get_echo_ackEv">get_echo_ack</a>() );</td></tr>
<tr><th id="299">299</th><td>}</td></tr>
<tr><th id="300">300</th><td></td></tr>
<tr><th id="301">301</th><td><em>bool</em> <a class="type" href="stmclient.h.html#STMClient" title='STMClient' data-ref="STMClient">STMClient</a>::<dfn class="decl def" id="_ZN9STMClient18process_user_inputEi" title='STMClient::process_user_input' data-ref="_ZN9STMClient18process_user_inputEi">process_user_input</dfn>( <em>int</em> <dfn class="local col6 decl" id="16fd" title='fd' data-type='int' data-ref="16fd">fd</dfn> )</td></tr>
<tr><th id="302">302</th><td>{</td></tr>
<tr><th id="303">303</th><td>  <em>const</em> <em>int</em> <dfn class="local col7 decl" id="17buf_size" title='buf_size' data-type='const int' data-ref="17buf_size">buf_size</dfn> = <var>16384</var>;</td></tr>
<tr><th id="304">304</th><td>  <em>char</em> <dfn class="local col8 decl" id="18buf" title='buf' data-type='char [16384]' data-ref="18buf">buf</dfn>[ <a class="local col7 ref" href="#17buf_size" title='buf_size' data-ref="17buf_size">buf_size</a> ];</td></tr>
<tr><th id="305">305</th><td></td></tr>
<tr><th id="306">306</th><td>  <i>/* fill buffer if possible */</i></td></tr>
<tr><th id="307">307</th><td>  <a class="typedef" href="../../../include/unistd.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a> <dfn class="local col9 decl" id="19bytes_read" title='bytes_read' data-type='ssize_t' data-ref="19bytes_read">bytes_read</dfn> = <a class="ref" href="../../../include/unistd.h.html#read" title='read' data-ref="read">read</a>( <a class="local col6 ref" href="#16fd" title='fd' data-ref="16fd">fd</a>, <a class="local col8 ref" href="#18buf" title='buf' data-ref="18buf">buf</a>, <a class="local col7 ref" href="#17buf_size" title='buf_size' data-ref="17buf_size">buf_size</a> );</td></tr>
<tr><th id="308">308</th><td>  <b>if</b> ( <a class="local col9 ref" href="#19bytes_read" title='bytes_read' data-ref="19bytes_read">bytes_read</a> == <var>0</var> ) { <i>/* EOF */</i></td></tr>
<tr><th id="309">309</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="310">310</th><td>  } <b>else</b> <b>if</b> ( <a class="local col9 ref" href="#19bytes_read" title='bytes_read' data-ref="19bytes_read">bytes_read</a> &lt; <var>0</var> ) {</td></tr>
<tr><th id="311">311</th><td>    <a class="ref" href="../../../include/stdio.h.html#perror" title='perror' data-ref="perror">perror</a>( <q>"read"</q> );</td></tr>
<tr><th id="312">312</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="313">313</th><td>  }</td></tr>
<tr><th id="314">314</th><td></td></tr>
<tr><th id="315">315</th><td>  <a class="typedef" href="stmclient.h.html#STMClient::NetworkType" title='STMClient::NetworkType' data-type='Network::Transport&lt;Network::UserStream, Terminal::Complete&gt;' data-ref="STMClient::NetworkType">NetworkType</a> &amp;<dfn class="local col0 decl" id="20net" title='net' data-type='NetworkType &amp;' data-ref="20net">net</dfn> = <a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrdeEv" title='std::tr1::__shared_ptr::operator*' data-ref="_ZNKSt3tr112__shared_ptrdeEv">*</a><a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a>;</td></tr>
<tr><th id="316">316</th><td></td></tr>
<tr><th id="317">317</th><td>  <b>if</b> ( <a class="local col0 ref" href="#20net" title='net' data-ref="20net">net</a>.<a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20shutdown_in_progressEv" title='Network::Transport::shutdown_in_progress' data-ref="_ZNK7Network9Transport20shutdown_in_progressEv">shutdown_in_progress</a>() ) {</td></tr>
<tr><th id="318">318</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="319">319</th><td>  }</td></tr>
<tr><th id="320">320</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager21get_prediction_engineEv" title='Overlay::OverlayManager::get_prediction_engine' data-ref="_ZN7Overlay14OverlayManager21get_prediction_engineEv">get_prediction_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay16PredictionEngine20set_local_frame_sentEm" title='Overlay::PredictionEngine::set_local_frame_sent' data-ref="_ZN7Overlay16PredictionEngine20set_local_frame_sentEm">set_local_frame_sent</a>( <a class="local col0 ref" href="#20net" title='net' data-ref="20net">net</a>.<a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport19get_sent_state_lastEv" title='Network::Transport::get_sent_state_last' data-ref="_ZNK7Network9Transport19get_sent_state_lastEv">get_sent_state_last</a>() );</td></tr>
<tr><th id="321">321</th><td></td></tr>
<tr><th id="322">322</th><td>  <i>/* Don't predict for bulk data. */</i></td></tr>
<tr><th id="323">323</th><td>  <em>bool</em> <dfn class="local col1 decl" id="21paste" title='paste' data-type='bool' data-ref="21paste">paste</dfn> = <a class="local col9 ref" href="#19bytes_read" title='bytes_read' data-ref="19bytes_read">bytes_read</a> &gt; <var>100</var>;</td></tr>
<tr><th id="324">324</th><td>  <b>if</b> ( <a class="local col1 ref" href="#21paste" title='paste' data-ref="21paste">paste</a> ) {</td></tr>
<tr><th id="325">325</th><td>    <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager21get_prediction_engineEv" title='Overlay::OverlayManager::get_prediction_engine' data-ref="_ZN7Overlay14OverlayManager21get_prediction_engineEv">get_prediction_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay16PredictionEngine5resetEv" title='Overlay::PredictionEngine::reset' data-ref="_ZN7Overlay16PredictionEngine5resetEv">reset</a>();</td></tr>
<tr><th id="326">326</th><td>  }</td></tr>
<tr><th id="327">327</th><td></td></tr>
<tr><th id="328">328</th><td>  <b>for</b> ( <em>int</em> <dfn class="local col2 decl" id="22i" title='i' data-type='int' data-ref="22i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#22i" title='i' data-ref="22i">i</a> &lt; <a class="local col9 ref" href="#19bytes_read" title='bytes_read' data-ref="19bytes_read">bytes_read</a>; <a class="local col2 ref" href="#22i" title='i' data-ref="22i">i</a>++ ) {</td></tr>
<tr><th id="329">329</th><td>    <em>char</em> <dfn class="local col3 decl" id="23the_byte" title='the_byte' data-type='char' data-ref="23the_byte">the_byte</dfn> = <a class="local col8 ref" href="#18buf" title='buf' data-ref="18buf">buf</a>[ <a class="local col2 ref" href="#22i" title='i' data-ref="22i">i</a> ];</td></tr>
<tr><th id="330">330</th><td></td></tr>
<tr><th id="331">331</th><td>    <b>if</b> ( !<a class="local col1 ref" href="#21paste" title='paste' data-ref="21paste">paste</a> ) {</td></tr>
<tr><th id="332">332</th><td>      <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager21get_prediction_engineEv" title='Overlay::OverlayManager::get_prediction_engine' data-ref="_ZN7Overlay14OverlayManager21get_prediction_engineEv">get_prediction_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay16PredictionEngine13new_user_byteEcRKN8Terminal11FramebufferE" title='Overlay::PredictionEngine::new_user_byte' data-ref="_ZN7Overlay16PredictionEngine13new_user_byteEcRKN8Terminal11FramebufferE">new_user_byte</a>( <a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a>, <a class="member" href="stmclient.h.html#STMClient::local_framebuffer" title='STMClient::local_framebuffer' data-ref="STMClient::local_framebuffer">local_framebuffer</a> );</td></tr>
<tr><th id="333">333</th><td>    }</td></tr>
<tr><th id="334">334</th><td></td></tr>
<tr><th id="335">335</th><td>    <b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::quit_sequence_started" title='STMClient::quit_sequence_started' data-ref="STMClient::quit_sequence_started">quit_sequence_started</a> ) {</td></tr>
<tr><th id="336">336</th><td>      <b>if</b> ( <a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a> == <kbd>'.'</kbd> ) { <i>/* Quit sequence is Ctrl-^ . */</i></td></tr>
<tr><th id="337">337</th><td>	<b>if</b> ( <a class="local col0 ref" href="#20net" title='net' data-ref="20net">net</a>.<a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport15has_remote_addrEv" title='Network::Transport::has_remote_addr' data-ref="_ZNK7Network9Transport15has_remote_addrEv">has_remote_addr</a>() &amp;&amp; (!<a class="local col0 ref" href="#20net" title='net' data-ref="20net">net</a>.<a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20shutdown_in_progressEv" title='Network::Transport::shutdown_in_progress' data-ref="_ZNK7Network9Transport20shutdown_in_progressEv">shutdown_in_progress</a>()) ) {</td></tr>
<tr><th id="338">338</th><td>	  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb" title='Overlay::NotificationEngine::set_notification_string' data-ref="_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb">set_notification_string</a>( <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> L<q>"Exiting on user request..."</q> ), <b>true</b> );</td></tr>
<tr><th id="339">339</th><td>	  <a class="local col0 ref" href="#20net" title='net' data-ref="20net">net</a>.<a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport14start_shutdownEv" title='Network::Transport::start_shutdown' data-ref="_ZN7Network9Transport14start_shutdownEv">start_shutdown</a>();</td></tr>
<tr><th id="340">340</th><td>	  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="341">341</th><td>	}</td></tr>
<tr><th id="342">342</th><td>	<b>return</b> <b>false</b>;</td></tr>
<tr><th id="343">343</th><td>      } <b>else</b> <b>if</b> ( <a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a> == <var>0x1a</var> ) { <i>/* Suspend sequence is escape_key Ctrl-Z */</i></td></tr>
<tr><th id="344">344</th><td>	<i>/* Restore terminal and terminal-driver state */</i></td></tr>
<tr><th id="345">345</th><td>	<a class="ref" href="../util/swrite.h.html#_Z6swriteiPKcl" title='swrite' data-ref="_Z6swriteiPKcl">swrite</a>( <a class="macro" href="../../../include/unistd.h.html#214" title="1" data-ref="_M/STDOUT_FILENO">STDOUT_FILENO</a>, <a class="member" href="stmclient.h.html#STMClient::display" title='STMClient::display' data-ref="STMClient::display">display</a>.<a class="ref" href="../terminal/terminaldisplay.h.html#_ZNK8Terminal7Display5closeB5cxx11Ev" title='Terminal::Display::close' data-ref="_ZNK8Terminal7Display5closeB5cxx11Ev">close</a>().<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5c_strEv" title='std::__cxx11::basic_string::c_str' data-ref="_ZNKSt7__cxx1112basic_string5c_strEv">c_str</a>() );</td></tr>
<tr><th id="346">346</th><td></td></tr>
<tr><th id="347">347</th><td>	<b>if</b> ( <a class="ref" href="../../../include/termios.h.html#tcsetattr" title='tcsetattr' data-ref="tcsetattr">tcsetattr</a>( <a class="macro" href="../../../include/unistd.h.html#213" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a>, <a class="macro" href="../../../include/x86_64-linux-gnu/bits/termios.h.html#213" title="0" data-ref="_M/TCSANOW">TCSANOW</a>, &amp;<a class="member" href="stmclient.h.html#STMClient::saved_termios" title='STMClient::saved_termios' data-ref="STMClient::saved_termios">saved_termios</a> ) &lt; <var>0</var> ) {</td></tr>
<tr><th id="348">348</th><td>	  <a class="ref" href="../../../include/stdio.h.html#perror" title='perror' data-ref="perror">perror</a>( <q>"tcsetattr"</q> );</td></tr>
<tr><th id="349">349</th><td>	  <a class="ref" href="../../../include/stdlib.h.html#exit" title='exit' data-ref="exit">exit</a>( <var>1</var> );</td></tr>
<tr><th id="350">350</th><td>	}</td></tr>
<tr><th id="351">351</th><td></td></tr>
<tr><th id="352">352</th><td>	<a class="ref" href="../../../include/stdio.h.html#fputs" title='fputs' data-ref="fputs">fputs</a>( <q>"\n\033[37;44m[mosh is suspended.]\033[m\n"</q>, <a class="macro" href="../../../include/stdio.h.html#173" title="stdout" data-ref="_M/stdout">stdout</a> );</td></tr>
<tr><th id="353">353</th><td></td></tr>
<tr><th id="354">354</th><td>	<a class="ref" href="../../../include/stdio.h.html#fflush" title='fflush' data-ref="fflush">fflush</a>( <span class="macro" title="__null" data-ref="_M/NULL">NULL</span> );</td></tr>
<tr><th id="355">355</th><td></td></tr>
<tr><th id="356">356</th><td>	<i>/* actually suspend */</i></td></tr>
<tr><th id="357">357</th><td>	<a class="ref" href="../../../include/signal.h.html#kill" title='kill' data-ref="kill">kill</a>( <var>0</var>, <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#52" title="19" data-ref="_M/SIGSTOP">SIGSTOP</a> );</td></tr>
<tr><th id="358">358</th><td></td></tr>
<tr><th id="359">359</th><td>	<a class="member" href="#_ZN9STMClient6resumeEv" title='STMClient::resume' data-ref="_ZN9STMClient6resumeEv">resume</a>();</td></tr>
<tr><th id="360">360</th><td>      } <b>else</b> <b>if</b> ( (<a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a> == <a class="member" href="stmclient.h.html#STMClient::escape_pass_key" title='STMClient::escape_pass_key' data-ref="STMClient::escape_pass_key">escape_pass_key</a>) || (<a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a> == <a class="member" href="stmclient.h.html#STMClient::escape_pass_key2" title='STMClient::escape_pass_key2' data-ref="STMClient::escape_pass_key2">escape_pass_key2</a>) ) {</td></tr>
<tr><th id="361">361</th><td>	<i>/* Emulation sequence to type escape_key is escape_key +</i></td></tr>
<tr><th id="362">362</th><td><i>	   escape_pass_key (that is escape key without Ctrl) */</i></td></tr>
<tr><th id="363">363</th><td>	<a class="local col0 ref" href="#20net" title='net' data-ref="20net">net</a>.<a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport17get_current_stateEv" title='Network::Transport::get_current_state' data-ref="_ZN7Network9Transport17get_current_stateEv">get_current_state</a>().<a class="ref" href="../statesync/user.h.html#_ZN7Network10UserStream9push_backERKN6Parser8UserByteE" title='Network::UserStream::push_back' data-ref="_ZN7Network10UserStream9push_backERKN6Parser8UserByteE">push_back</a>( <span class="namespace">Parser::</span><a class="type" href="../terminal/parseraction.h.html#Parser::UserByte" title='Parser::UserByte' data-ref="Parser::UserByte">UserByte</a><a class="ref" href="../terminal/parseraction.h.html#_ZN6Parser8UserByteC1Ei" title='Parser::UserByte::UserByte' data-ref="_ZN6Parser8UserByteC1Ei">(</a> <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> ) );</td></tr>
<tr><th id="364">364</th><td>      } <b>else</b> {</td></tr>
<tr><th id="365">365</th><td>	<i>/* Escape key followed by anything other than . and ^ gets sent literally */</i></td></tr>
<tr><th id="366">366</th><td>	<a class="local col0 ref" href="#20net" title='net' data-ref="20net">net</a>.<a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport17get_current_stateEv" title='Network::Transport::get_current_state' data-ref="_ZN7Network9Transport17get_current_stateEv">get_current_state</a>().<a class="ref" href="../statesync/user.h.html#_ZN7Network10UserStream9push_backERKN6Parser8UserByteE" title='Network::UserStream::push_back' data-ref="_ZN7Network10UserStream9push_backERKN6Parser8UserByteE">push_back</a>( <span class="namespace">Parser::</span><a class="type" href="../terminal/parseraction.h.html#Parser::UserByte" title='Parser::UserByte' data-ref="Parser::UserByte">UserByte</a><a class="ref" href="../terminal/parseraction.h.html#_ZN6Parser8UserByteC1Ei" title='Parser::UserByte::UserByte' data-ref="_ZN6Parser8UserByteC1Ei">(</a> <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> ) );</td></tr>
<tr><th id="367">367</th><td>	<a class="local col0 ref" href="#20net" title='net' data-ref="20net">net</a>.<a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport17get_current_stateEv" title='Network::Transport::get_current_state' data-ref="_ZN7Network9Transport17get_current_stateEv">get_current_state</a>().<a class="ref" href="../statesync/user.h.html#_ZN7Network10UserStream9push_backERKN6Parser8UserByteE" title='Network::UserStream::push_back' data-ref="_ZN7Network10UserStream9push_backERKN6Parser8UserByteE">push_back</a>( <span class="namespace">Parser::</span><a class="type" href="../terminal/parseraction.h.html#Parser::UserByte" title='Parser::UserByte' data-ref="Parser::UserByte">UserByte</a><a class="ref" href="../terminal/parseraction.h.html#_ZN6Parser8UserByteC1Ei" title='Parser::UserByte::UserByte' data-ref="_ZN6Parser8UserByteC1Ei">(</a> <a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a> ) );	  </td></tr>
<tr><th id="368">368</th><td>      }</td></tr>
<tr><th id="369">369</th><td></td></tr>
<tr><th id="370">370</th><td>      <a class="member" href="stmclient.h.html#STMClient::quit_sequence_started" title='STMClient::quit_sequence_started' data-ref="STMClient::quit_sequence_started">quit_sequence_started</a> = <b>false</b>;</td></tr>
<tr><th id="371">371</th><td></td></tr>
<tr><th id="372">372</th><td>      <b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZNK7Overlay18NotificationEngine23get_notification_stringB5cxx11Ev" title='Overlay::NotificationEngine::get_notification_string' data-ref="_ZNK7Overlay18NotificationEngine23get_notification_stringB5cxx11Ev">get_notification_string</a>() <a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZSteqRKNSt7__cxx1112basic_stringIT_St11char_traitsIS1_ESaIS1_EEES7_" title='std::operator==' data-ref="_ZSteqRKNSt7__cxx1112basic_stringIT_St11char_traitsIS1_ESaIS1_EEES7_">==</a> <a class="member" href="stmclient.h.html#STMClient::escape_key_help" title='STMClient::escape_key_help' data-ref="STMClient::escape_key_help">escape_key_help</a> ) {</td></tr>
<tr><th id="373">373</th><td>	<a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb" title='Overlay::NotificationEngine::set_notification_string' data-ref="_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb">set_notification_string</a>( <a class="ref fake" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_"></a>L<q>""</q> );</td></tr>
<tr><th id="374">374</th><td>      }</td></tr>
<tr><th id="375">375</th><td></td></tr>
<tr><th id="376">376</th><td>      <b>continue</b>;</td></tr>
<tr><th id="377">377</th><td>    }</td></tr>
<tr><th id="378">378</th><td></td></tr>
<tr><th id="379">379</th><td>    <a class="member" href="stmclient.h.html#STMClient::quit_sequence_started" title='STMClient::quit_sequence_started' data-ref="STMClient::quit_sequence_started">quit_sequence_started</a> = (<a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a> &gt; <var>0</var>) &amp;&amp; (<a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a> == <a class="member" href="stmclient.h.html#STMClient::escape_key" title='STMClient::escape_key' data-ref="STMClient::escape_key">escape_key</a>) &amp;&amp; (<a class="member" href="stmclient.h.html#STMClient::lf_entered" title='STMClient::lf_entered' data-ref="STMClient::lf_entered">lf_entered</a> || (! <a class="member" href="stmclient.h.html#STMClient::escape_requires_lf" title='STMClient::escape_requires_lf' data-ref="STMClient::escape_requires_lf">escape_requires_lf</a>));</td></tr>
<tr><th id="380">380</th><td>    <b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::quit_sequence_started" title='STMClient::quit_sequence_started' data-ref="STMClient::quit_sequence_started">quit_sequence_started</a> ) {</td></tr>
<tr><th id="381">381</th><td>      <a class="member" href="stmclient.h.html#STMClient::lf_entered" title='STMClient::lf_entered' data-ref="STMClient::lf_entered">lf_entered</a> = <b>false</b>;</td></tr>
<tr><th id="382">382</th><td>      <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb" title='Overlay::NotificationEngine::set_notification_string' data-ref="_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb">set_notification_string</a>( <a class="member" href="stmclient.h.html#STMClient::escape_key_help" title='STMClient::escape_key_help' data-ref="STMClient::escape_key_help">escape_key_help</a>, <b>true</b>, <b>false</b> );</td></tr>
<tr><th id="383">383</th><td>      <b>continue</b>;</td></tr>
<tr><th id="384">384</th><td>    }</td></tr>
<tr><th id="385">385</th><td></td></tr>
<tr><th id="386">386</th><td>    <a class="member" href="stmclient.h.html#STMClient::lf_entered" title='STMClient::lf_entered' data-ref="STMClient::lf_entered">lf_entered</a> = ( (<a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a> == <var>0x0A</var>) || (<a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a> == <var>0x0D</var>) ); <i>/* LineFeed, Ctrl-J, '\n' or CarriageReturn, Ctrl-M, '\r' */</i></td></tr>
<tr><th id="387">387</th><td></td></tr>
<tr><th id="388">388</th><td>    <b>if</b> ( <a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a> == <var>0x0C</var> ) { <i>/* Ctrl-L */</i></td></tr>
<tr><th id="389">389</th><td>      <a class="member" href="stmclient.h.html#STMClient::repaint_requested" title='STMClient::repaint_requested' data-ref="STMClient::repaint_requested">repaint_requested</a> = <b>true</b>;</td></tr>
<tr><th id="390">390</th><td>    }</td></tr>
<tr><th id="391">391</th><td></td></tr>
<tr><th id="392">392</th><td>    <a class="local col0 ref" href="#20net" title='net' data-ref="20net">net</a>.<a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport17get_current_stateEv" title='Network::Transport::get_current_state' data-ref="_ZN7Network9Transport17get_current_stateEv">get_current_state</a>().<a class="ref" href="../statesync/user.h.html#_ZN7Network10UserStream9push_backERKN6Parser8UserByteE" title='Network::UserStream::push_back' data-ref="_ZN7Network10UserStream9push_backERKN6Parser8UserByteE">push_back</a>( <span class="namespace">Parser::</span><a class="type" href="../terminal/parseraction.h.html#Parser::UserByte" title='Parser::UserByte' data-ref="Parser::UserByte">UserByte</a><a class="ref" href="../terminal/parseraction.h.html#_ZN6Parser8UserByteC1Ei" title='Parser::UserByte::UserByte' data-ref="_ZN6Parser8UserByteC1Ei">(</a> <a class="local col3 ref" href="#23the_byte" title='the_byte' data-ref="23the_byte">the_byte</a> ) );		</td></tr>
<tr><th id="393">393</th><td>  }</td></tr>
<tr><th id="394">394</th><td></td></tr>
<tr><th id="395">395</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="396">396</th><td>}</td></tr>
<tr><th id="397">397</th><td></td></tr>
<tr><th id="398">398</th><td><em>bool</em> <a class="type" href="stmclient.h.html#STMClient" title='STMClient' data-ref="STMClient">STMClient</a>::<dfn class="decl def" id="_ZN9STMClient14process_resizeEv" title='STMClient::process_resize' data-ref="_ZN9STMClient14process_resizeEv">process_resize</dfn>( <em>void</em> )</td></tr>
<tr><th id="399">399</th><td>{</td></tr>
<tr><th id="400">400</th><td>  <i>/* get new size */</i></td></tr>
<tr><th id="401">401</th><td>  <b>if</b> ( <a class="ref" href="../../../include/x86_64-linux-gnu/sys/ioctl.h.html#ioctl" title='ioctl' data-ref="ioctl">ioctl</a>( <a class="macro" href="../../../include/unistd.h.html#213" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a>, <a class="macro" href="../../../include/asm-generic/ioctls.h.html#37" title="0x5413" data-ref="_M/TIOCGWINSZ">TIOCGWINSZ</a>, &amp;<a class="member" href="stmclient.h.html#STMClient::window_size" title='STMClient::window_size' data-ref="STMClient::window_size">window_size</a> ) &lt; <var>0</var> ) {</td></tr>
<tr><th id="402">402</th><td>    <a class="ref" href="../../../include/stdio.h.html#perror" title='perror' data-ref="perror">perror</a>( <q>"ioctl TIOCGWINSZ"</q> );</td></tr>
<tr><th id="403">403</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="404">404</th><td>  }</td></tr>
<tr><th id="405">405</th><td>  </td></tr>
<tr><th id="406">406</th><td>  <i>/* tell remote emulator */</i></td></tr>
<tr><th id="407">407</th><td>  <span class="namespace">Parser::</span><a class="type" href="../terminal/parseraction.h.html#Parser::Resize" title='Parser::Resize' data-ref="Parser::Resize">Resize</a> <dfn class="local col4 decl" id="24res" title='res' data-type='Parser::Resize' data-ref="24res">res</dfn><a class="ref" href="../terminal/parseraction.h.html#_ZN6Parser6ResizeC1Emm" title='Parser::Resize::Resize' data-ref="_ZN6Parser6ResizeC1Emm">(</a> <a class="member" href="stmclient.h.html#STMClient::window_size" title='STMClient::window_size' data-ref="STMClient::window_size">window_size</a>.<a class="ref" href="../../../include/x86_64-linux-gnu/bits/ioctl-types.h.html#winsize::ws_col" title='winsize::ws_col' data-ref="winsize::ws_col">ws_col</a>, <a class="member" href="stmclient.h.html#STMClient::window_size" title='STMClient::window_size' data-ref="STMClient::window_size">window_size</a>.<a class="ref" href="../../../include/x86_64-linux-gnu/bits/ioctl-types.h.html#winsize::ws_row" title='winsize::ws_row' data-ref="winsize::ws_row">ws_row</a> );</td></tr>
<tr><th id="408">408</th><td>  </td></tr>
<tr><th id="409">409</th><td>  <b>if</b> ( !<a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20shutdown_in_progressEv" title='Network::Transport::shutdown_in_progress' data-ref="_ZNK7Network9Transport20shutdown_in_progressEv">shutdown_in_progress</a>() ) {</td></tr>
<tr><th id="410">410</th><td>    <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport17get_current_stateEv" title='Network::Transport::get_current_state' data-ref="_ZN7Network9Transport17get_current_stateEv">get_current_state</a>().<a class="ref" href="../statesync/user.h.html#_ZN7Network10UserStream9push_backERKN6Parser6ResizeE" title='Network::UserStream::push_back' data-ref="_ZN7Network10UserStream9push_backERKN6Parser6ResizeE">push_back</a>( <a class="local col4 ref" href="#24res" title='res' data-ref="24res">res</a> );</td></tr>
<tr><th id="411">411</th><td>  }</td></tr>
<tr><th id="412">412</th><td></td></tr>
<tr><th id="413">413</th><td>  <i>/* note remote emulator will probably reply with its own Resize to adjust our state */</i></td></tr>
<tr><th id="414">414</th><td>  </td></tr>
<tr><th id="415">415</th><td>  <i>/* tell prediction engine */</i></td></tr>
<tr><th id="416">416</th><td>  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager21get_prediction_engineEv" title='Overlay::OverlayManager::get_prediction_engine' data-ref="_ZN7Overlay14OverlayManager21get_prediction_engineEv">get_prediction_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay16PredictionEngine5resetEv" title='Overlay::PredictionEngine::reset' data-ref="_ZN7Overlay16PredictionEngine5resetEv">reset</a>();</td></tr>
<tr><th id="417">417</th><td></td></tr>
<tr><th id="418">418</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="419">419</th><td>}</td></tr>
<tr><th id="420">420</th><td></td></tr>
<tr><th id="421">421</th><td><em>bool</em> <a class="type" href="stmclient.h.html#STMClient" title='STMClient' data-ref="STMClient">STMClient</a>::<dfn class="decl def" id="_ZN9STMClient4mainEv" title='STMClient::main' data-ref="_ZN9STMClient4mainEv">main</dfn>( <em>void</em> )</td></tr>
<tr><th id="422">422</th><td>{</td></tr>
<tr><th id="423">423</th><td>  <i>/* initialize signal handling and structures */</i></td></tr>
<tr><th id="424">424</th><td>  <a class="member" href="#_ZN9STMClient9main_initEv" title='STMClient::main_init' data-ref="_ZN9STMClient9main_initEv">main_init</a>();</td></tr>
<tr><th id="425">425</th><td></td></tr>
<tr><th id="426">426</th><td>  <i>/* Drop unnecessary privileges */</i></td></tr>
<tr><th id="427">427</th><td><u>#<span data-ppcond="427">ifdef</span> <span class="macro" data-ref="_M/HAVE_PLEDGE">HAVE_PLEDGE</span></u></td></tr>
<tr><th id="428">428</th><td>  <i>/* OpenBSD pledge() syscall */</i></td></tr>
<tr><th id="429">429</th><td>  <b>if</b> ( pledge( <q>"stdio inet tty"</q>, NULL )) {</td></tr>
<tr><th id="430">430</th><td>    perror( <q>"pledge() failed"</q> );</td></tr>
<tr><th id="431">431</th><td>    exit( <var>1</var> );</td></tr>
<tr><th id="432">432</th><td>  }</td></tr>
<tr><th id="433">433</th><td><u>#<span data-ppcond="427">endif</span></u></td></tr>
<tr><th id="434">434</th><td></td></tr>
<tr><th id="435">435</th><td>  <i>/* prepare to poll for events */</i></td></tr>
<tr><th id="436">436</th><td>  <a class="type" href="../util/select.h.html#Select" title='Select' data-ref="Select">Select</a> &amp;<dfn class="local col5 decl" id="25sel" title='sel' data-type='Select &amp;' data-ref="25sel">sel</dfn> = <a class="type" href="../util/select.h.html#Select" title='Select' data-ref="Select">Select</a>::<a class="ref" href="../util/select.h.html#_ZN6Select12get_instanceEv" title='Select::get_instance' data-ref="_ZN6Select12get_instanceEv">get_instance</a>();</td></tr>
<tr><th id="437">437</th><td></td></tr>
<tr><th id="438">438</th><td>  <b>while</b> ( <var>1</var> ) {</td></tr>
<tr><th id="439">439</th><td>    <b>try</b> {</td></tr>
<tr><th id="440">440</th><td>      <a class="member" href="#_ZN9STMClient16output_new_frameEv" title='STMClient::output_new_frame' data-ref="_ZN9STMClient16output_new_frameEv">output_new_frame</a>();</td></tr>
<tr><th id="441">441</th><td></td></tr>
<tr><th id="442">442</th><td>      <em>int</em> <dfn class="local col6 decl" id="26wait_time" title='wait_time' data-type='int' data-ref="26wait_time">wait_time</dfn> = <a class="ref" href="../../../include/c++/5/bits/algorithmfwd.h.html#_ZSt3minRKT_S1_" title='std::min' data-ref="_ZSt3minRKT_S1_">min</a>( <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport9wait_timeEv" title='Network::Transport::wait_time' data-ref="_ZN7Network9Transport9wait_timeEv">wait_time</a>(), <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZNK7Overlay14OverlayManager9wait_timeEv" title='Overlay::OverlayManager::wait_time' data-ref="_ZNK7Overlay14OverlayManager9wait_timeEv">wait_time</a>() );</td></tr>
<tr><th id="443">443</th><td></td></tr>
<tr><th id="444">444</th><td>      <i>/* Handle startup "Connecting..." message */</i></td></tr>
<tr><th id="445">445</th><td>      <b>if</b> ( <a class="member" href="stmclient.h.html#_ZNK9STMClient16still_connectingEv" title='STMClient::still_connecting' data-ref="_ZNK9STMClient16still_connectingEv">still_connecting</a>() ) {</td></tr>
<tr><th id="446">446</th><td>	<a class="local col6 ref" href="#26wait_time" title='wait_time' data-ref="26wait_time">wait_time</a> = <a class="ref" href="../../../include/c++/5/bits/algorithmfwd.h.html#_ZSt3minRKT_S1_" title='std::min' data-ref="_ZSt3minRKT_S1_">min</a>( <var>250</var>, <a class="local col6 ref" href="#26wait_time" title='wait_time' data-ref="26wait_time">wait_time</a> );</td></tr>
<tr><th id="447">447</th><td>      }</td></tr>
<tr><th id="448">448</th><td></td></tr>
<tr><th id="449">449</th><td>      <i>/* poll for events */</i></td></tr>
<tr><th id="450">450</th><td>      <i>/* network-&gt;fd() can in theory change over time */</i></td></tr>
<tr><th id="451">451</th><td>      <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select9clear_fdsEv" title='Select::clear_fds' data-ref="_ZN6Select9clear_fdsEv">clear_fds</a>();</td></tr>
<tr><th id="452">452</th><td>      <span class="namespace">std::</span><a class="type" href="../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt; <em>int</em> &gt; <dfn class="local col7 decl" id="27fd_list" title='fd_list' data-type='std::vector&lt;int&gt;' data-ref="27fd_list">fd_list</dfn><a class="ref" href="../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vectorC1ERKSt6vectorIT_T0_E" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1ERKSt6vectorIT_T0_E">(</a> <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport3fdsEv" title='Network::Transport::fds' data-ref="_ZNK7Network9Transport3fdsEv">fds</a>() );</td></tr>
<tr><th id="453">453</th><td>      <b>for</b> ( <span class="namespace">std::</span><a class="type" href="../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt; <em>int</em> &gt;::<a class="typedef" href="../../../include/c++/5/bits/stl_vector.h.html#std::vector{int,std::allocator{int}}::const_iterator" title='std::vector&lt;int, std::allocator&lt;int&gt; &gt;::const_iterator' data-type='__gnu_cxx::__normal_iterator&lt;const_pointer, vector&lt;int, allocator&lt;int&gt; &gt; &gt;' data-ref="std::vector{int,std::allocator{int}}::const_iterator">const_iterator</a> <dfn class="local col8 decl" id="28it" title='it' data-type='std::vector&lt;int&gt;::const_iterator' data-ref="28it">it</dfn> = <a class="ref fake" href="../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::__normal_iterator{_Iterator,_Container}" title='__gnu_cxx::__normal_iterator::__normal_iterator&lt;_Iterator, _Container&gt;' data-ref="__gnu_cxx::__normal_iterator::__normal_iterator{_Iterator,_Container}"></a><a class="local col7 ref" href="#27fd_list" title='fd_list' data-ref="27fd_list">fd_list</a>.<a class="ref" href="../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector5beginEv" title='std::vector::begin' data-ref="_ZNSt6vector5beginEv">begin</a>();</td></tr>
<tr><th id="454">454</th><td>	    <a class="local col8 ref" href="#28it" title='it' data-ref="28it">it</a> <a class="ref" href="../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::operator!=" title='__gnu_cxx::operator!=' data-ref="__gnu_cxx::operator!=">!=</a> <a class="local col7 ref" href="#27fd_list" title='fd_list' data-ref="27fd_list">fd_list</a>.<a class="ref" href="../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector3endEv" title='std::vector::end' data-ref="_ZNSt6vector3endEv">end</a>();</td></tr>
<tr><th id="455">455</th><td>	    <a class="local col8 ref" href="#28it" title='it' data-ref="28it">it</a><a class="ref" href="../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator++" title='__gnu_cxx::__normal_iterator::operator++' data-ref="__gnu_cxx::__normal_iterator::operator++">++</a> ) {</td></tr>
<tr><th id="456">456</th><td>	<a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select6add_fdEi" title='Select::add_fd' data-ref="_ZN6Select6add_fdEi">add_fd</a>( <a class="ref" href="../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator*" title='__gnu_cxx::__normal_iterator::operator*' data-ref="__gnu_cxx::__normal_iterator::operator*">*</a><a class="local col8 ref" href="#28it" title='it' data-ref="28it">it</a> );</td></tr>
<tr><th id="457">457</th><td>      }</td></tr>
<tr><th id="458">458</th><td>      <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select6add_fdEi" title='Select::add_fd' data-ref="_ZN6Select6add_fdEi">add_fd</a>( <a class="macro" href="../../../include/unistd.h.html#213" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a> );</td></tr>
<tr><th id="459">459</th><td></td></tr>
<tr><th id="460">460</th><td>      <em>int</em> <dfn class="local col9 decl" id="29active_fds" title='active_fds' data-type='int' data-ref="29active_fds">active_fds</dfn> = <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select6selectEi" title='Select::select' data-ref="_ZN6Select6selectEi">select</a>( <a class="local col6 ref" href="#26wait_time" title='wait_time' data-ref="26wait_time">wait_time</a> );</td></tr>
<tr><th id="461">461</th><td>      <b>if</b> ( <a class="local col9 ref" href="#29active_fds" title='active_fds' data-ref="29active_fds">active_fds</a> &lt; <var>0</var> ) {</td></tr>
<tr><th id="462">462</th><td>	<a class="ref" href="../../../include/stdio.h.html#perror" title='perror' data-ref="perror">perror</a>( <q>"select"</q> );</td></tr>
<tr><th id="463">463</th><td>	<b>break</b>;</td></tr>
<tr><th id="464">464</th><td>      }</td></tr>
<tr><th id="465">465</th><td></td></tr>
<tr><th id="466">466</th><td>      <em>bool</em> <dfn class="local col0 decl" id="30network_ready_to_read" title='network_ready_to_read' data-type='bool' data-ref="30network_ready_to_read">network_ready_to_read</dfn> = <b>false</b>;</td></tr>
<tr><th id="467">467</th><td></td></tr>
<tr><th id="468">468</th><td>      <b>for</b> ( <span class="namespace">std::</span><a class="type" href="../../../include/c++/5/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt; <em>int</em> &gt;::<a class="typedef" href="../../../include/c++/5/bits/stl_vector.h.html#std::vector{int,std::allocator{int}}::const_iterator" title='std::vector&lt;int, std::allocator&lt;int&gt; &gt;::const_iterator' data-type='__gnu_cxx::__normal_iterator&lt;const_pointer, vector&lt;int, allocator&lt;int&gt; &gt; &gt;' data-ref="std::vector{int,std::allocator{int}}::const_iterator">const_iterator</a> <dfn class="local col1 decl" id="31it" title='it' data-type='std::vector&lt;int&gt;::const_iterator' data-ref="31it">it</dfn> = <a class="ref fake" href="../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::__normal_iterator{_Iterator,_Container}" title='__gnu_cxx::__normal_iterator::__normal_iterator&lt;_Iterator, _Container&gt;' data-ref="__gnu_cxx::__normal_iterator::__normal_iterator{_Iterator,_Container}"></a><a class="local col7 ref" href="#27fd_list" title='fd_list' data-ref="27fd_list">fd_list</a>.<a class="ref" href="../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector5beginEv" title='std::vector::begin' data-ref="_ZNSt6vector5beginEv">begin</a>();</td></tr>
<tr><th id="469">469</th><td>	    <a class="local col1 ref" href="#31it" title='it' data-ref="31it">it</a> <a class="ref" href="../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::operator!=" title='__gnu_cxx::operator!=' data-ref="__gnu_cxx::operator!=">!=</a> <a class="local col7 ref" href="#27fd_list" title='fd_list' data-ref="27fd_list">fd_list</a>.<a class="ref" href="../../../include/c++/5/bits/stl_vector.h.html#_ZNSt6vector3endEv" title='std::vector::end' data-ref="_ZNSt6vector3endEv">end</a>();</td></tr>
<tr><th id="470">470</th><td>	    <a class="local col1 ref" href="#31it" title='it' data-ref="31it">it</a><a class="ref" href="../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator++" title='__gnu_cxx::__normal_iterator::operator++' data-ref="__gnu_cxx::__normal_iterator::operator++">++</a> ) {</td></tr>
<tr><th id="471">471</th><td>	<b>if</b> ( <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZNK6Select4readEi" title='Select::read' data-ref="_ZNK6Select4readEi">read</a>( <a class="ref" href="../../../include/c++/5/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator*" title='__gnu_cxx::__normal_iterator::operator*' data-ref="__gnu_cxx::__normal_iterator::operator*">*</a><a class="local col1 ref" href="#31it" title='it' data-ref="31it">it</a> ) ) {</td></tr>
<tr><th id="472">472</th><td>	  <i>/* packet received from the network */</i></td></tr>
<tr><th id="473">473</th><td>	  <i>/* we only read one socket each run */</i></td></tr>
<tr><th id="474">474</th><td>	  <a class="local col0 ref" href="#30network_ready_to_read" title='network_ready_to_read' data-ref="30network_ready_to_read">network_ready_to_read</a> = <b>true</b>;</td></tr>
<tr><th id="475">475</th><td>	}</td></tr>
<tr><th id="476">476</th><td>      }</td></tr>
<tr><th id="477">477</th><td></td></tr>
<tr><th id="478">478</th><td>      <b>if</b> ( <a class="local col0 ref" href="#30network_ready_to_read" title='network_ready_to_read' data-ref="30network_ready_to_read">network_ready_to_read</a> ) {</td></tr>
<tr><th id="479">479</th><td>	<a class="member" href="#_ZN9STMClient21process_network_inputEv" title='STMClient::process_network_input' data-ref="_ZN9STMClient21process_network_inputEv">process_network_input</a>();</td></tr>
<tr><th id="480">480</th><td>      }</td></tr>
<tr><th id="481">481</th><td>    </td></tr>
<tr><th id="482">482</th><td>      <b>if</b> ( <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZNK6Select4readEi" title='Select::read' data-ref="_ZNK6Select4readEi">read</a>( <a class="macro" href="../../../include/unistd.h.html#213" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a> ) &amp;&amp; !<a class="member" href="#_ZN9STMClient18process_user_inputEi" title='STMClient::process_user_input' data-ref="_ZN9STMClient18process_user_inputEi">process_user_input</a>( <a class="macro" href="../../../include/unistd.h.html#213" title="0" data-ref="_M/STDIN_FILENO">STDIN_FILENO</a> ) ) { <i>/* input from the user needs to be fed to the network */</i></td></tr>
<tr><th id="483">483</th><td>	<b>if</b> ( !<a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport15has_remote_addrEv" title='Network::Transport::has_remote_addr' data-ref="_ZNK7Network9Transport15has_remote_addrEv">has_remote_addr</a>() ) {</td></tr>
<tr><th id="484">484</th><td>	  <b>break</b>;</td></tr>
<tr><th id="485">485</th><td>	} <b>else</b> <b>if</b> ( !<a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20shutdown_in_progressEv" title='Network::Transport::shutdown_in_progress' data-ref="_ZNK7Network9Transport20shutdown_in_progressEv">shutdown_in_progress</a>() ) {</td></tr>
<tr><th id="486">486</th><td>	  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb" title='Overlay::NotificationEngine::set_notification_string' data-ref="_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb">set_notification_string</a>( <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> L<q>"Exiting..."</q> ), <b>true</b> );</td></tr>
<tr><th id="487">487</th><td>	  <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport14start_shutdownEv" title='Network::Transport::start_shutdown' data-ref="_ZN7Network9Transport14start_shutdownEv">start_shutdown</a>();</td></tr>
<tr><th id="488">488</th><td>	}</td></tr>
<tr><th id="489">489</th><td>      }</td></tr>
<tr><th id="490">490</th><td></td></tr>
<tr><th id="491">491</th><td>      <b>if</b> ( <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select6signalEi" title='Select::signal' data-ref="_ZN6Select6signalEi">signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#61" title="28" data-ref="_M/SIGWINCH">SIGWINCH</a> ) &amp;&amp; !<a class="member" href="#_ZN9STMClient14process_resizeEv" title='STMClient::process_resize' data-ref="_ZN9STMClient14process_resizeEv">process_resize</a>() ) { <i>/* resize */</i></td></tr>
<tr><th id="492">492</th><td>	<b>return</b> <b>false</b>;</td></tr>
<tr><th id="493">493</th><td>      }</td></tr>
<tr><th id="494">494</th><td></td></tr>
<tr><th id="495">495</th><td>      <b>if</b> ( <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select6signalEi" title='Select::signal' data-ref="_ZN6Select6signalEi">signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#51" title="18" data-ref="_M/SIGCONT">SIGCONT</a> ) ) {</td></tr>
<tr><th id="496">496</th><td>	<a class="member" href="#_ZN9STMClient6resumeEv" title='STMClient::resume' data-ref="_ZN9STMClient6resumeEv">resume</a>();</td></tr>
<tr><th id="497">497</th><td>      }</td></tr>
<tr><th id="498">498</th><td></td></tr>
<tr><th id="499">499</th><td>      <b>if</b> ( <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select6signalEi" title='Select::signal' data-ref="_ZN6Select6signalEi">signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#47" title="15" data-ref="_M/SIGTERM">SIGTERM</a> )</td></tr>
<tr><th id="500">500</th><td>           || <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select6signalEi" title='Select::signal' data-ref="_ZN6Select6signalEi">signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#33" title="2" data-ref="_M/SIGINT">SIGINT</a> )</td></tr>
<tr><th id="501">501</th><td>           || <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select6signalEi" title='Select::signal' data-ref="_ZN6Select6signalEi">signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#32" title="1" data-ref="_M/SIGHUP">SIGHUP</a> )</td></tr>
<tr><th id="502">502</th><td>           || <a class="local col5 ref" href="#25sel" title='sel' data-ref="25sel">sel</a>.<a class="ref" href="../util/select.h.html#_ZN6Select6signalEi" title='Select::signal' data-ref="_ZN6Select6signalEi">signal</a>( <a class="macro" href="../../../include/x86_64-linux-gnu/bits/signum.h.html#45" title="13" data-ref="_M/SIGPIPE">SIGPIPE</a> ) ) {</td></tr>
<tr><th id="503">503</th><td>        <i>/* shutdown signal */</i></td></tr>
<tr><th id="504">504</th><td>        <b>if</b> ( !<a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport15has_remote_addrEv" title='Network::Transport::has_remote_addr' data-ref="_ZNK7Network9Transport15has_remote_addrEv">has_remote_addr</a>() ) {</td></tr>
<tr><th id="505">505</th><td>          <b>break</b>;</td></tr>
<tr><th id="506">506</th><td>        } <b>else</b> <b>if</b> ( !<a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20shutdown_in_progressEv" title='Network::Transport::shutdown_in_progress' data-ref="_ZNK7Network9Transport20shutdown_in_progressEv">shutdown_in_progress</a>() ) {</td></tr>
<tr><th id="507">507</th><td>          <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb" title='Overlay::NotificationEngine::set_notification_string' data-ref="_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb">set_notification_string</a>( <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> L<q>"Signal received, shutting down..."</q> ), <b>true</b> );</td></tr>
<tr><th id="508">508</th><td>          <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport14start_shutdownEv" title='Network::Transport::start_shutdown' data-ref="_ZN7Network9Transport14start_shutdownEv">start_shutdown</a>();</td></tr>
<tr><th id="509">509</th><td>        }</td></tr>
<tr><th id="510">510</th><td>      }</td></tr>
<tr><th id="511">511</th><td></td></tr>
<tr><th id="512">512</th><td>      <i>/* quit if our shutdown has been acknowledged */</i></td></tr>
<tr><th id="513">513</th><td>      <b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20shutdown_in_progressEv" title='Network::Transport::shutdown_in_progress' data-ref="_ZNK7Network9Transport20shutdown_in_progressEv">shutdown_in_progress</a>() &amp;&amp; <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport21shutdown_acknowledgedEv" title='Network::Transport::shutdown_acknowledged' data-ref="_ZNK7Network9Transport21shutdown_acknowledgedEv">shutdown_acknowledged</a>() ) {</td></tr>
<tr><th id="514">514</th><td>	<a class="member" href="stmclient.h.html#STMClient::clean_shutdown" title='STMClient::clean_shutdown' data-ref="STMClient::clean_shutdown">clean_shutdown</a> = <b>true</b>;</td></tr>
<tr><th id="515">515</th><td>	<b>break</b>;</td></tr>
<tr><th id="516">516</th><td>      }</td></tr>
<tr><th id="517">517</th><td></td></tr>
<tr><th id="518">518</th><td>      <i>/* quit after shutdown acknowledgement timeout */</i></td></tr>
<tr><th id="519">519</th><td>      <b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20shutdown_in_progressEv" title='Network::Transport::shutdown_in_progress' data-ref="_ZNK7Network9Transport20shutdown_in_progressEv">shutdown_in_progress</a>() &amp;&amp; <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport22shutdown_ack_timed_outEv" title='Network::Transport::shutdown_ack_timed_out' data-ref="_ZNK7Network9Transport22shutdown_ack_timed_outEv">shutdown_ack_timed_out</a>() ) {</td></tr>
<tr><th id="520">520</th><td>	<b>break</b>;</td></tr>
<tr><th id="521">521</th><td>      }</td></tr>
<tr><th id="522">522</th><td></td></tr>
<tr><th id="523">523</th><td>      <i>/* quit if we received and acknowledged a shutdown request */</i></td></tr>
<tr><th id="524">524</th><td>      <b>if</b> ( <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport30counterparty_shutdown_ack_sentEv" title='Network::Transport::counterparty_shutdown_ack_sent' data-ref="_ZNK7Network9Transport30counterparty_shutdown_ack_sentEv">counterparty_shutdown_ack_sent</a>() ) {</td></tr>
<tr><th id="525">525</th><td>	<a class="member" href="stmclient.h.html#STMClient::clean_shutdown" title='STMClient::clean_shutdown' data-ref="STMClient::clean_shutdown">clean_shutdown</a> = <b>true</b>;</td></tr>
<tr><th id="526">526</th><td>	<b>break</b>;</td></tr>
<tr><th id="527">527</th><td>      }</td></tr>
<tr><th id="528">528</th><td></td></tr>
<tr><th id="529">529</th><td>      <i>/* write diagnostic message if can't reach server */</i></td></tr>
<tr><th id="530">530</th><td>      <b>if</b> ( <a class="member" href="stmclient.h.html#_ZNK9STMClient16still_connectingEv" title='STMClient::still_connecting' data-ref="_ZNK9STMClient16still_connectingEv">still_connecting</a>()</td></tr>
<tr><th id="531">531</th><td>	   &amp;&amp; (!<a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20shutdown_in_progressEv" title='Network::Transport::shutdown_in_progress' data-ref="_ZNK7Network9Transport20shutdown_in_progressEv">shutdown_in_progress</a>())</td></tr>
<tr><th id="532">532</th><td>	   &amp;&amp; (<a class="ref" href="../network/network.h.html#_ZN7Network9timestampEv" title='Network::timestamp' data-ref="_ZN7Network9timestampEv">timestamp</a>() - <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport23get_latest_remote_stateEv" title='Network::Transport::get_latest_remote_state' data-ref="_ZNK7Network9Transport23get_latest_remote_stateEv">get_latest_remote_state</a>().<a class="ref" href="../network/transportstate.h.html#Network::TimestampedState::timestamp" title='Network::TimestampedState&lt;Terminal::Complete&gt;::timestamp' data-ref="Network::TimestampedState::timestamp">timestamp</a> &gt; <var>250</var>) ) {</td></tr>
<tr><th id="533">533</th><td>	<b>if</b> ( <a class="ref" href="../network/network.h.html#_ZN7Network9timestampEv" title='Network::timestamp' data-ref="_ZN7Network9timestampEv">timestamp</a>() - <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport23get_latest_remote_stateEv" title='Network::Transport::get_latest_remote_state' data-ref="_ZNK7Network9Transport23get_latest_remote_stateEv">get_latest_remote_state</a>().<a class="ref" href="../network/transportstate.h.html#Network::TimestampedState::timestamp" title='Network::TimestampedState&lt;Terminal::Complete&gt;::timestamp' data-ref="Network::TimestampedState::timestamp">timestamp</a> &gt; <var>15000</var> ) {</td></tr>
<tr><th id="534">534</th><td>	  <b>if</b> ( !<a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20shutdown_in_progressEv" title='Network::Transport::shutdown_in_progress' data-ref="_ZNK7Network9Transport20shutdown_in_progressEv">shutdown_in_progress</a>() ) {</td></tr>
<tr><th id="535">535</th><td>	    <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb" title='Overlay::NotificationEngine::set_notification_string' data-ref="_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb">set_notification_string</a>( <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> L<q>"Timed out waiting for server..."</q> ), <b>true</b> );</td></tr>
<tr><th id="536">536</th><td>	    <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport14start_shutdownEv" title='Network::Transport::start_shutdown' data-ref="_ZN7Network9Transport14start_shutdownEv">start_shutdown</a>();</td></tr>
<tr><th id="537">537</th><td>	  }</td></tr>
<tr><th id="538">538</th><td>	} <b>else</b> {</td></tr>
<tr><th id="539">539</th><td>	  <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb" title='Overlay::NotificationEngine::set_notification_string' data-ref="_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb">set_notification_string</a>( <a class="member" href="stmclient.h.html#STMClient::connecting_notification" title='STMClient::connecting_notification' data-ref="STMClient::connecting_notification">connecting_notification</a> );</td></tr>
<tr><th id="540">540</th><td>	}</td></tr>
<tr><th id="541">541</th><td>      } <b>else</b> <b>if</b> ( (<a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20get_remote_state_numEv" title='Network::Transport::get_remote_state_num' data-ref="_ZNK7Network9Transport20get_remote_state_numEv">get_remote_state_num</a>() != <var>0</var>)</td></tr>
<tr><th id="542">542</th><td>		  &amp;&amp; (<a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZNK7Overlay18NotificationEngine23get_notification_stringB5cxx11Ev" title='Overlay::NotificationEngine::get_notification_string' data-ref="_ZNK7Overlay18NotificationEngine23get_notification_stringB5cxx11Ev">get_notification_string</a>()</td></tr>
<tr><th id="543">543</th><td>		      <a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZSteqRKNSt7__cxx1112basic_stringIT_St11char_traitsIS1_ESaIS1_EEES7_" title='std::operator==' data-ref="_ZSteqRKNSt7__cxx1112basic_stringIT_St11char_traitsIS1_ESaIS1_EEES7_">==</a> <a class="member" href="stmclient.h.html#STMClient::connecting_notification" title='STMClient::connecting_notification' data-ref="STMClient::connecting_notification">connecting_notification</a>) ) {</td></tr>
<tr><th id="544">544</th><td>	<a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb" title='Overlay::NotificationEngine::set_notification_string' data-ref="_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb">set_notification_string</a>( <a class="ref fake" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_"></a>L<q>""</q> );</td></tr>
<tr><th id="545">545</th><td>      }</td></tr>
<tr><th id="546">546</th><td></td></tr>
<tr><th id="547">547</th><td>      <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport4tickEv" title='Network::Transport::tick' data-ref="_ZN7Network9Transport4tickEv">tick</a>();</td></tr>
<tr><th id="548">548</th><td></td></tr>
<tr><th id="549">549</th><td>      <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a> &amp; <dfn class="local col2 decl" id="32send_error" title='send_error' data-type='string &amp;' data-ref="32send_error">send_error</dfn> = <a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZN7Network9Transport14get_send_errorB5cxx11Ev" title='Network::Transport::get_send_error' data-ref="_ZN7Network9Transport14get_send_errorB5cxx11Ev">get_send_error</a>();</td></tr>
<tr><th id="550">550</th><td>      <b>if</b> ( !<a class="local col2 ref" href="#32send_error" title='send_error' data-ref="32send_error">send_error</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string5emptyEv" title='std::__cxx11::basic_string::empty' data-ref="_ZNKSt7__cxx1112basic_string5emptyEv">empty</a>() ) {</td></tr>
<tr><th id="551">551</th><td>        <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine17set_network_errorERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='Overlay::NotificationEngine::set_network_error' data-ref="_ZN7Overlay18NotificationEngine17set_network_errorERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">set_network_error</a>( <a class="local col2 ref" href="#32send_error" title='send_error' data-ref="32send_error">send_error</a> );</td></tr>
<tr><th id="552">552</th><td>	<a class="local col2 ref" href="#32send_error" title='send_error' data-ref="32send_error">send_error</a>.<a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_string5clearEv" title='std::__cxx11::basic_string::clear' data-ref="_ZNSt7__cxx1112basic_string5clearEv">clear</a>();</td></tr>
<tr><th id="553">553</th><td>      } <b>else</b> {</td></tr>
<tr><th id="554">554</th><td>        <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine19clear_network_errorEv" title='Overlay::NotificationEngine::clear_network_error' data-ref="_ZN7Overlay18NotificationEngine19clear_network_errorEv">clear_network_error</a>();</td></tr>
<tr><th id="555">555</th><td>      }</td></tr>
<tr><th id="556">556</th><td>    } <b>catch</b> ( <em>const</em> <span class="namespace">Network::</span><a class="type" href="../network/network.h.html#Network::NetworkException" title='Network::NetworkException' data-ref="Network::NetworkException">NetworkException</a> &amp;<dfn class="local col3 decl" id="33e" title='e' data-type='const Network::NetworkException &amp;' data-ref="33e">e</dfn> ) {</td></tr>
<tr><th id="557">557</th><td>      <b>if</b> ( !<a class="member" href="stmclient.h.html#STMClient::network" title='STMClient::network' data-ref="STMClient::network">network</a><a class="ref" href="../../../include/c++/5/tr1/shared_ptr.h.html#_ZNKSt3tr112__shared_ptrptEv" title='std::tr1::__shared_ptr::operator-&gt;' data-ref="_ZNKSt3tr112__shared_ptrptEv">-&gt;</a><a class="ref" href="../network/networktransport.h.html#_ZNK7Network9Transport20shutdown_in_progressEv" title='Network::Transport::shutdown_in_progress' data-ref="_ZNK7Network9Transport20shutdown_in_progressEv">shutdown_in_progress</a>() ) {</td></tr>
<tr><th id="558">558</th><td>        <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine17set_network_errorERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='Overlay::NotificationEngine::set_network_error' data-ref="_ZN7Overlay18NotificationEngine17set_network_errorERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">set_network_error</a>( <a class="ref fake" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_"></a><a class="local col3 ref" href="#33e" title='e' data-ref="33e">e</a>.<a class="virtual ref" href="../network/network.h.html#_ZNK7Network16NetworkException4whatEv" title='Network::NetworkException::what' data-ref="_ZNK7Network16NetworkException4whatEv">what</a>() );</td></tr>
<tr><th id="559">559</th><td>      }</td></tr>
<tr><th id="560">560</th><td></td></tr>
<tr><th id="561">561</th><td>      <b>struct</b> <a class="type" href="../../../include/time.h.html#timespec" title='timespec' data-ref="timespec">timespec</a> <a class="ref fake" href="../../../include/time.h.html#120" title='timespec::timespec' data-ref="_ZN8timespecC1Ev"></a><dfn class="local col4 decl" id="34req" title='req' data-type='struct timespec' data-ref="34req">req</dfn>;</td></tr>
<tr><th id="562">562</th><td>      <a class="local col4 ref" href="#34req" title='req' data-ref="34req">req</a>.<a class="ref" href="../../../include/time.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec">tv_sec</a> = <var>0</var>;</td></tr>
<tr><th id="563">563</th><td>      <a class="local col4 ref" href="#34req" title='req' data-ref="34req">req</a>.<a class="ref" href="../../../include/time.h.html#timespec::tv_nsec" title='timespec::tv_nsec' data-ref="timespec::tv_nsec">tv_nsec</a> = <var>200000000</var>; <i>/* 0.2 sec */</i></td></tr>
<tr><th id="564">564</th><td>      <a class="ref" href="../../../include/time.h.html#nanosleep" title='nanosleep' data-ref="nanosleep">nanosleep</a>( &amp;<a class="local col4 ref" href="#34req" title='req' data-ref="34req">req</a>, <span class="macro" title="__null" data-ref="_M/NULL">NULL</span> );</td></tr>
<tr><th id="565">565</th><td>      <a class="ref" href="../util/timestamp.h.html#_Z16freeze_timestampv" title='freeze_timestamp' data-ref="_Z16freeze_timestampv">freeze_timestamp</a>();</td></tr>
<tr><th id="566">566</th><td>    } <b>catch</b> ( <em>const</em> <span class="namespace">Crypto::</span><a class="type" href="../crypto/crypto.h.html#Crypto::CryptoException" title='Crypto::CryptoException' data-ref="Crypto::CryptoException">CryptoException</a> &amp;<dfn class="local col5 decl" id="35e" title='e' data-type='const Crypto::CryptoException &amp;' data-ref="35e">e</dfn> ) {</td></tr>
<tr><th id="567">567</th><td>      <b>if</b> ( <a class="local col5 ref" href="#35e" title='e' data-ref="35e">e</a>.<a class="ref" href="../crypto/crypto.h.html#Crypto::CryptoException::fatal" title='Crypto::CryptoException::fatal' data-ref="Crypto::CryptoException::fatal">fatal</a> ) {</td></tr>
<tr><th id="568">568</th><td>        <b>throw</b>;</td></tr>
<tr><th id="569">569</th><td>      } <b>else</b> {</td></tr>
<tr><th id="570">570</th><td>        <em>wchar_t</em> <dfn class="local col6 decl" id="36tmp" title='tmp' data-type='wchar_t [128]' data-ref="36tmp">tmp</dfn>[ <var>128</var> ];</td></tr>
<tr><th id="571">571</th><td>        <a class="ref" href="../../../include/wchar.h.html#swprintf" title='swprintf' data-ref="swprintf">swprintf</a>( <a class="local col6 ref" href="#36tmp" title='tmp' data-ref="36tmp">tmp</a>, <var>128</var>, L<q>"Crypto exception: %s"</q>, <a class="local col5 ref" href="#35e" title='e' data-ref="35e">e</a>.<a class="virtual ref" href="../crypto/crypto.h.html#_ZNK6Crypto15CryptoException4whatEv" title='Crypto::CryptoException::what' data-ref="_ZNK6Crypto15CryptoException4whatEv">what</a>() );</td></tr>
<tr><th id="572">572</th><td>        <a class="member" href="stmclient.h.html#STMClient::overlays" title='STMClient::overlays' data-ref="STMClient::overlays">overlays</a>.<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay14OverlayManager23get_notification_engineEv" title='Overlay::OverlayManager::get_notification_engine' data-ref="_ZN7Overlay14OverlayManager23get_notification_engineEv">get_notification_engine</a>().<a class="ref" href="terminaloverlay.h.html#_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb" title='Overlay::NotificationEngine::set_notification_string' data-ref="_ZN7Overlay18NotificationEngine23set_notification_stringERKNSt7__cxx1112basic_stringIwSt11char_traitsIwESaIwEEEbb">set_notification_string</a>( <a class="typedef" href="../../../include/c++/5/bits/stringfwd.h.html#std::__cxx11::wstring" title='std::__cxx11::wstring' data-type='basic_string&lt;wchar_t&gt;' data-ref="std::__cxx11::wstring">wstring</a><a class="ref" href="../../../include/c++/5/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_">(</a> <a class="local col6 ref" href="#36tmp" title='tmp' data-ref="36tmp">tmp</a> ) );</td></tr>
<tr><th id="573">573</th><td>      }</td></tr>
<tr><th id="574">574</th><td>    }</td></tr>
<tr><th id="575">575</th><td>  }</td></tr>
<tr><th id="576">576</th><td>  <b>return</b> <a class="member" href="stmclient.h.html#STMClient::clean_shutdown" title='STMClient::clean_shutdown' data-ref="STMClient::clean_shutdown">clean_shutdown</a>;</td></tr>
<tr><th id="577">577</th><td>}</td></tr>
<tr><th id="578">578</th><td></td></tr>
<tr><th id="579">579</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2017-Oct-12</em> from project codebrowser revision <em>mosh-1.3.2-38-ge9c3bbd</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
